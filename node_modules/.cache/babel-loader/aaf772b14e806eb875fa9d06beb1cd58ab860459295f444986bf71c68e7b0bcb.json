{"ast":null,"code":"var _excluded = [\"a11yTitle\", \"dropHeight\", \"dropProps\", \"focus\", \"focusIndicator\", \"icon\", \"id\", \"mask\", \"name\", \"onBlur\", \"onChange\", \"onFocus\", \"onKeyDown\", \"placeholder\", \"plain\", \"reverse\", \"textAlign\", \"value\"];\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nimport React, { forwardRef, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Drop } from '../Drop';\nimport { FormContext } from '../Form/FormContext';\nimport { Keyboard } from '../Keyboard';\nimport { sizeStyle, useForwardedRef, useSizedIcon } from '../../utils';\nimport { StyledMaskedInput, StyledMaskedInputContainer, StyledIcon } from './StyledMaskedInput';\nimport { MaskedInputPropTypes } from './propTypes';\nvar parseValue = function parseValue(mask, value) {\n  // break the value up into mask parts\n  var valueParts = []; // { part, beginIndex, endIndex }\n  var valueIndex = 0;\n  var maskIndex = 0;\n  while (value !== undefined && valueIndex < value.length && maskIndex < mask.length) {\n    var item = mask[maskIndex];\n    var found = void 0;\n    if (item.fixed) {\n      var length = item.fixed.length;\n\n      // grab however much of value (starting at valueIndex) matches\n      // item.fixed. If none matches it and there is more in value\n      // add in the fixed item.\n      var matching = 0;\n      while (matching < length && value[valueIndex + matching] === item.fixed[matching]) {\n        matching += 1;\n      }\n      if (matching > 0) {\n        var part = value.slice(valueIndex, valueIndex + matching);\n        if (valueIndex + matching < value.length) {\n          // matched part of the fixed portion but there's more stuff\n          // after it. Go ahead and fill in the entire fixed chunk\n          part = item.fixed;\n        }\n        valueParts.push({\n          part: part,\n          beginIndex: valueIndex,\n          endIndex: valueIndex + matching - 1\n        });\n        valueIndex += matching;\n      } else {\n        valueParts.push({\n          part: item.fixed,\n          beginIndex: valueIndex,\n          endIndex: valueIndex + length - 1\n        });\n      }\n      maskIndex += 1;\n      found = true;\n    } else if (item.options && item.restrictToOptions !== false) {\n      // reverse assuming larger is later\n      found = item.options.slice(0).reverse()\n      // eslint-disable-next-line no-loop-func\n      .some(function (option) {\n        var length = option.length;\n        var part = value.slice(valueIndex, valueIndex + length);\n        if (part === option) {\n          valueParts.push({\n            part: part,\n            beginIndex: valueIndex,\n            endIndex: valueIndex + length - 1\n          });\n          valueIndex += length;\n          maskIndex += 1;\n          return true;\n        }\n        return false;\n      });\n    }\n    if (!found) {\n      if (item.regexp) {\n        var minLength = Array.isArray(item.length) && item.length[0] || item.length || 1;\n        var maxLength = Array.isArray(item.length) && item.length[1] || item.length || value.length - valueIndex;\n        var _length = maxLength;\n        while (!found && _length >= minLength) {\n          var _part = value.slice(valueIndex, valueIndex + _length);\n          if (item.regexp.test(_part)) {\n            valueParts.push({\n              part: _part,\n              beginIndex: valueIndex,\n              endIndex: valueIndex + _length - 1\n            });\n            valueIndex += _length;\n            maskIndex += 1;\n            found = true;\n          }\n          _length -= 1;\n        }\n        if (!found) {\n          valueIndex = value.length;\n        }\n      } else {\n        var _length2 = Array.isArray(item.length) ? item.length[1] : item.length || value.length - valueIndex;\n        var _part2 = value.slice(valueIndex, valueIndex + _length2);\n        valueParts.push({\n          part: _part2,\n          beginIndex: valueIndex,\n          endIndex: valueIndex + _length2 - 1\n        });\n        valueIndex += _length2;\n        maskIndex += 1;\n      }\n    }\n  }\n  return valueParts;\n};\nvar defaultMask = [{\n  regexp: /[^]*/\n}];\nvar ContainerBox = styled(Box).withConfig({\n  displayName: \"MaskedInput__ContainerBox\",\n  componentId: \"sc-af8hzu-0\"\n})([\"\", \";\"], function (props) {\n  return props.dropHeight ? sizeStyle('max-height', props.dropHeight, props.theme) : 'max-height: inherit;';\n});\nvar dropAlign = {\n  top: 'bottom',\n  left: 'left'\n};\nvar MaskedInput = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var a11yTitle = _ref.a11yTitle,\n    dropHeight = _ref.dropHeight,\n    dropProps = _ref.dropProps,\n    focusProp = _ref.focus,\n    _ref$focusIndicator = _ref.focusIndicator,\n    focusIndicator = _ref$focusIndicator === void 0 ? true : _ref$focusIndicator,\n    icon = _ref.icon,\n    id = _ref.id,\n    _ref$mask = _ref.mask,\n    mask = _ref$mask === void 0 ? defaultMask : _ref$mask,\n    name = _ref.name,\n    _onBlur = _ref.onBlur,\n    onChange = _ref.onChange,\n    _onFocus = _ref.onFocus,\n    onKeyDown = _ref.onKeyDown,\n    placeholder = _ref.placeholder,\n    plain = _ref.plain,\n    reverse = _ref.reverse,\n    textAlign = _ref.textAlign,\n    valueProp = _ref.value,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var formContext = useContext(FormContext);\n  var _formContext$useFormI = formContext.useFormInput({\n      name: name,\n      value: valueProp,\n      initialValue: ''\n    }),\n    value = _formContext$useFormI[0],\n    setValue = _formContext$useFormI[1];\n  var valueParts = useMemo(function () {\n    return parseValue(mask, value);\n  }, [mask, value]);\n  var inputRef = useForwardedRef(ref);\n  var dropRef = useRef();\n\n  // Caller's ref, if provided\n  var _useState = useState(),\n    dropPropsTarget = _useState[0],\n    setDropPropsTarget = _useState[1];\n  useEffect(function () {\n    var nextDropPropsTarget;\n    // If caller provided a ref, set to 'pending' until ref.current is defined\n    if (dropProps && 'target' in dropProps) {\n      nextDropPropsTarget = dropProps.target || 'pending';\n      setDropPropsTarget(nextDropPropsTarget);\n    }\n  }, [dropProps]);\n  var _useState2 = useState(focusProp),\n    focus = _useState2[0],\n    setFocus = _useState2[1];\n  var _useState3 = useState(),\n    activeMaskIndex = _useState3[0],\n    setActiveMaskIndex = _useState3[1];\n  var _useState4 = useState(),\n    activeOptionIndex = _useState4[0],\n    setActiveOptionIndex = _useState4[1];\n  var _useState5 = useState(),\n    showDrop = _useState5[0],\n    setShowDrop = _useState5[1];\n  useEffect(function () {\n    if (focus) {\n      var timer = setTimeout(function () {\n        // determine which mask element the caret is at\n        var caretIndex = inputRef.current.selectionStart;\n        var maskIndex;\n        valueParts.some(function (part, index) {\n          if (part.beginIndex <= caretIndex && part.endIndex >= caretIndex) {\n            maskIndex = index;\n            return true;\n          }\n          return false;\n        });\n        if (maskIndex === undefined && valueParts.length < mask.length) {\n          maskIndex = valueParts.length; // first unused one\n        }\n        if (maskIndex && mask[maskIndex].fixed) {\n          maskIndex -= 1; // fixed mask parts are never \"active\"\n        }\n        if (maskIndex !== activeMaskIndex) {\n          setActiveMaskIndex(maskIndex);\n          setActiveOptionIndex(-1);\n          setShowDrop(maskIndex >= 0 && mask[maskIndex].options && true);\n        }\n      }, 10); // 10ms empirically chosen\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n    return undefined;\n  }, [activeMaskIndex, focus, inputRef, mask, valueParts]);\n  var setInputValue = useCallback(function (nextValue) {\n    // Calling set value function directly on input because React library\n    // overrides setter `event.target.value =` and loses original event\n    // target fidelity.\n    // https://stackoverflow.com/a/46012210 &&\n    // https://github.com/grommet/grommet/pull/3171#discussion_r296415239\n    var nativeInputValueSetter = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value').set;\n    nativeInputValueSetter.call(inputRef.current, nextValue);\n    var event = new Event('input', {\n      bubbles: true\n    });\n    inputRef.current.dispatchEvent(event);\n  }, [inputRef]);\n\n  // This could be due to a paste or as the user is typing.\n  var onChangeInput = useCallback(function (event) {\n    var eventValue = event.target.value;\n    // Align with the mask.\n    var nextValueParts = parseValue(mask, eventValue);\n    var nextValue = nextValueParts.map(function (part) {\n      return part.part;\n    }).join('');\n    if (nextValue !== eventValue) {\n      // The mask adjusted the next value. If something was added,\n      // the value must be valid. Change the actual input value\n      // to correspond.\n      // This will re-trigger this callback with the next value.\n      if (nextValue.length > eventValue.length) setInputValue(nextValue);\n      // If the nextValue is shorter, something must be invalid.\n      else if (value && eventValue.length < value.length) {\n        // If the user is removing characters, preserve what the\n        // user is working on.\n        setValue(eventValue);\n        if (onChange) onChange(event);\n      } else {\n        // If the user is adding invalid characters, don't allow it.\n        // Revert to the prior value.\n        setInputValue(value);\n      }\n    } else if (value !== nextValue) {\n      setValue(nextValue);\n      if (onChange) onChange(event);\n    }\n  }, [mask, onChange, setInputValue, setValue, value]);\n  var onOption = useCallback(function (option) {\n    return function () {\n      var nextValueParts = [].concat(valueParts);\n      nextValueParts[activeMaskIndex] = {\n        part: option\n      };\n      // add any fixed parts that follow\n      var index = activeMaskIndex + 1;\n      while (index < mask.length && !nextValueParts[index] && mask[index].fixed) {\n        nextValueParts[index] = {\n          part: mask[index].fixed\n        };\n        index += 1;\n      }\n      var nextValue = nextValueParts.map(function (part) {\n        return part.part;\n      }).join('');\n      setInputValue(nextValue);\n      // restore focus to input\n      inputRef.current.focus();\n    };\n  }, [activeMaskIndex, inputRef, mask, setInputValue, valueParts]);\n  var onNextOption = useCallback(function (event) {\n    var item = mask[activeMaskIndex];\n    if (item && item.options) {\n      event.preventDefault();\n      var index = Math.min(activeOptionIndex + 1, item.options.length - 1);\n      setActiveOptionIndex(index);\n    }\n  }, [activeMaskIndex, activeOptionIndex, mask]);\n  var onPreviousOption = useCallback(function (event) {\n    if (activeMaskIndex >= 0 && mask[activeMaskIndex].options) {\n      event.preventDefault();\n      var index = Math.max(activeOptionIndex - 1, 0);\n      setActiveOptionIndex(index);\n    }\n  }, [activeMaskIndex, activeOptionIndex, mask]);\n  var onSelectOption = useCallback(function (event) {\n    if (activeMaskIndex >= 0 && activeOptionIndex >= 0) {\n      event.preventDefault();\n      var option = mask[activeMaskIndex].options[activeOptionIndex];\n      onOption(option)();\n    }\n  }, [activeMaskIndex, activeOptionIndex, mask, onOption]);\n  var onEsc = useCallback(function (event) {\n    if (showDrop) {\n      // we have to stop both synthetic events and native events\n      // drop and layer should not close by pressing esc on this input\n      event.stopPropagation();\n      event.nativeEvent.stopImmediatePropagation();\n      setShowDrop(false);\n    }\n  }, [showDrop]);\n  var onHideDrop = useCallback(function () {\n    return setShowDrop(false);\n  }, []);\n  var renderPlaceholder = function renderPlaceholder() {\n    return mask.map(function (item) {\n      return item.placeholder || item.fixed;\n    }).join('');\n  };\n  var maskedInputIcon = useSizedIcon(icon, rest.size, theme);\n  return /*#__PURE__*/React.createElement(StyledMaskedInputContainer, {\n    plain: plain\n  }, maskedInputIcon && /*#__PURE__*/React.createElement(StyledIcon, {\n    reverse: reverse,\n    theme: theme\n  }, maskedInputIcon), /*#__PURE__*/React.createElement(Keyboard, {\n    onEsc: onEsc,\n    onTab: showDrop ? function () {\n      return setShowDrop(false);\n    } : undefined,\n    onLeft: undefined,\n    onRight: undefined,\n    onUp: onPreviousOption,\n    onDown: showDrop ? onNextOption : function () {\n      return setShowDrop(true);\n    },\n    onEnter: onSelectOption,\n    onKeyDown: onKeyDown\n  }, /*#__PURE__*/React.createElement(StyledMaskedInput, _extends({\n    ref: inputRef,\n    \"aria-label\": a11yTitle,\n    id: id,\n    name: name,\n    autoComplete: \"off\",\n    focusIndicator: focusIndicator,\n    plain: plain,\n    placeholder: placeholder || renderPlaceholder(),\n    icon: icon,\n    reverse: reverse,\n    focus: focus,\n    textAlign: textAlign\n  }, rest, {\n    value: value,\n    theme: theme,\n    onFocus: function onFocus(event) {\n      setFocus(true);\n      setShowDrop(true);\n      if (_onFocus) _onFocus(event);\n    },\n    onBlur: function onBlur(event) {\n      setFocus(false);\n      // This will be called when the user clicks on a suggestion,\n      // check for that and don't remove the drop in that case.\n      // Drop will already have removed itself if the user has focused\n      // outside of the Drop.\n      if (!dropRef.current) setShowDrop(false);\n      if (_onBlur) _onBlur(event);\n    },\n    onChange: onChangeInput\n  }))), showDrop && mask[activeMaskIndex] && mask[activeMaskIndex].options &&\n  // If caller has specified dropProps.target, ensure target is defined\n  dropPropsTarget !== 'pending' && /*#__PURE__*/React.createElement(Drop, _extends({\n    id: id ? \"masked-input-drop__\" + id : undefined,\n    align: dropAlign,\n    responsive: false,\n    target: inputRef.current,\n    onClickOutside: onHideDrop,\n    onEsc: onHideDrop\n  }, dropProps), /*#__PURE__*/React.createElement(ContainerBox, {\n    ref: dropRef,\n    overflow: \"auto\",\n    dropHeight: dropHeight\n  }, mask[activeMaskIndex].options.map(function (option, index) {\n    // Determine whether the label is done as a child or\n    // as an option Button kind property.\n    var child = !theme.button.option ? /*#__PURE__*/React.createElement(Box, {\n      pad: {\n        horizontal: 'small',\n        vertical: 'xsmall'\n      }\n    }, option) : undefined;\n    // if we have a child, turn on plain, and hoverIndicator\n\n    return /*#__PURE__*/React.createElement(Box, {\n      key: option,\n      flex: false\n    }, /*#__PURE__*/React.createElement(Button, {\n      tabIndex: \"-1\",\n      onClick: onOption(option),\n      onMouseOver: function onMouseOver() {\n        return setActiveOptionIndex(index);\n      },\n      onFocus: function onFocus() {},\n      active: index === activeOptionIndex,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      hoverIndicator: !child ? undefined : 'background',\n      label: !child ? option : undefined\n    }, child));\n  }))));\n});\nMaskedInput.displayName = 'MaskedInput';\nMaskedInput.propTypes = MaskedInputPropTypes;\nexport { MaskedInput };","map":{"version":3,"names":["_excluded","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","forwardRef","useCallback","useContext","useEffect","useMemo","useRef","useState","styled","ThemeContext","defaultProps","Box","Button","Drop","FormContext","Keyboard","sizeStyle","useForwardedRef","useSizedIcon","StyledMaskedInput","StyledMaskedInputContainer","StyledIcon","MaskedInputPropTypes","parseValue","mask","value","valueParts","valueIndex","maskIndex","undefined","item","found","fixed","matching","part","slice","push","beginIndex","endIndex","options","restrictToOptions","reverse","some","option","regexp","minLength","Array","isArray","maxLength","_length","_part","test","_length2","_part2","defaultMask","ContainerBox","withConfig","displayName","componentId","props","dropHeight","theme","dropAlign","top","left","MaskedInput","_ref","ref","a11yTitle","dropProps","focusProp","focus","_ref$focusIndicator","focusIndicator","icon","id","_ref$mask","name","_onBlur","onBlur","onChange","_onFocus","onFocus","onKeyDown","placeholder","plain","textAlign","valueProp","rest","formContext","_formContext$useFormI","useFormInput","initialValue","setValue","inputRef","dropRef","_useState","dropPropsTarget","setDropPropsTarget","nextDropPropsTarget","_useState2","setFocus","_useState3","activeMaskIndex","setActiveMaskIndex","_useState4","activeOptionIndex","setActiveOptionIndex","_useState5","showDrop","setShowDrop","timer","setTimeout","caretIndex","current","selectionStart","index","clearTimeout","setInputValue","nextValue","nativeInputValueSetter","getOwnPropertyDescriptor","window","HTMLInputElement","set","event","Event","bubbles","dispatchEvent","onChangeInput","eventValue","nextValueParts","map","join","onOption","concat","onNextOption","preventDefault","Math","min","onPreviousOption","max","onSelectOption","onEsc","stopPropagation","nativeEvent","stopImmediatePropagation","onHideDrop","renderPlaceholder","maskedInputIcon","size","createElement","onTab","onLeft","onRight","onUp","onDown","onEnter","autoComplete","align","responsive","onClickOutside","overflow","child","button","pad","horizontal","vertical","flex","tabIndex","onClick","onMouseOver","active","kind","hoverIndicator","label","propTypes"],"sources":["/Users/kyle/node_modules/grommet/es6/components/MaskedInput/MaskedInput.js"],"sourcesContent":["var _excluded = [\"a11yTitle\", \"dropHeight\", \"dropProps\", \"focus\", \"focusIndicator\", \"icon\", \"id\", \"mask\", \"name\", \"onBlur\", \"onChange\", \"onFocus\", \"onKeyDown\", \"placeholder\", \"plain\", \"reverse\", \"textAlign\", \"value\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React, { forwardRef, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Drop } from '../Drop';\nimport { FormContext } from '../Form/FormContext';\nimport { Keyboard } from '../Keyboard';\nimport { sizeStyle, useForwardedRef, useSizedIcon } from '../../utils';\nimport { StyledMaskedInput, StyledMaskedInputContainer, StyledIcon } from './StyledMaskedInput';\nimport { MaskedInputPropTypes } from './propTypes';\nvar parseValue = function parseValue(mask, value) {\n  // break the value up into mask parts\n  var valueParts = []; // { part, beginIndex, endIndex }\n  var valueIndex = 0;\n  var maskIndex = 0;\n  while (value !== undefined && valueIndex < value.length && maskIndex < mask.length) {\n    var item = mask[maskIndex];\n    var found = void 0;\n    if (item.fixed) {\n      var length = item.fixed.length;\n\n      // grab however much of value (starting at valueIndex) matches\n      // item.fixed. If none matches it and there is more in value\n      // add in the fixed item.\n      var matching = 0;\n      while (matching < length && value[valueIndex + matching] === item.fixed[matching]) {\n        matching += 1;\n      }\n      if (matching > 0) {\n        var part = value.slice(valueIndex, valueIndex + matching);\n        if (valueIndex + matching < value.length) {\n          // matched part of the fixed portion but there's more stuff\n          // after it. Go ahead and fill in the entire fixed chunk\n          part = item.fixed;\n        }\n        valueParts.push({\n          part: part,\n          beginIndex: valueIndex,\n          endIndex: valueIndex + matching - 1\n        });\n        valueIndex += matching;\n      } else {\n        valueParts.push({\n          part: item.fixed,\n          beginIndex: valueIndex,\n          endIndex: valueIndex + length - 1\n        });\n      }\n      maskIndex += 1;\n      found = true;\n    } else if (item.options && item.restrictToOptions !== false) {\n      // reverse assuming larger is later\n      found = item.options.slice(0).reverse()\n      // eslint-disable-next-line no-loop-func\n      .some(function (option) {\n        var length = option.length;\n        var part = value.slice(valueIndex, valueIndex + length);\n        if (part === option) {\n          valueParts.push({\n            part: part,\n            beginIndex: valueIndex,\n            endIndex: valueIndex + length - 1\n          });\n          valueIndex += length;\n          maskIndex += 1;\n          return true;\n        }\n        return false;\n      });\n    }\n    if (!found) {\n      if (item.regexp) {\n        var minLength = Array.isArray(item.length) && item.length[0] || item.length || 1;\n        var maxLength = Array.isArray(item.length) && item.length[1] || item.length || value.length - valueIndex;\n        var _length = maxLength;\n        while (!found && _length >= minLength) {\n          var _part = value.slice(valueIndex, valueIndex + _length);\n          if (item.regexp.test(_part)) {\n            valueParts.push({\n              part: _part,\n              beginIndex: valueIndex,\n              endIndex: valueIndex + _length - 1\n            });\n            valueIndex += _length;\n            maskIndex += 1;\n            found = true;\n          }\n          _length -= 1;\n        }\n        if (!found) {\n          valueIndex = value.length;\n        }\n      } else {\n        var _length2 = Array.isArray(item.length) ? item.length[1] : item.length || value.length - valueIndex;\n        var _part2 = value.slice(valueIndex, valueIndex + _length2);\n        valueParts.push({\n          part: _part2,\n          beginIndex: valueIndex,\n          endIndex: valueIndex + _length2 - 1\n        });\n        valueIndex += _length2;\n        maskIndex += 1;\n      }\n    }\n  }\n  return valueParts;\n};\nvar defaultMask = [{\n  regexp: /[^]*/\n}];\nvar ContainerBox = styled(Box).withConfig({\n  displayName: \"MaskedInput__ContainerBox\",\n  componentId: \"sc-af8hzu-0\"\n})([\"\", \";\"], function (props) {\n  return props.dropHeight ? sizeStyle('max-height', props.dropHeight, props.theme) : 'max-height: inherit;';\n});\nvar dropAlign = {\n  top: 'bottom',\n  left: 'left'\n};\nvar MaskedInput = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var a11yTitle = _ref.a11yTitle,\n    dropHeight = _ref.dropHeight,\n    dropProps = _ref.dropProps,\n    focusProp = _ref.focus,\n    _ref$focusIndicator = _ref.focusIndicator,\n    focusIndicator = _ref$focusIndicator === void 0 ? true : _ref$focusIndicator,\n    icon = _ref.icon,\n    id = _ref.id,\n    _ref$mask = _ref.mask,\n    mask = _ref$mask === void 0 ? defaultMask : _ref$mask,\n    name = _ref.name,\n    _onBlur = _ref.onBlur,\n    onChange = _ref.onChange,\n    _onFocus = _ref.onFocus,\n    onKeyDown = _ref.onKeyDown,\n    placeholder = _ref.placeholder,\n    plain = _ref.plain,\n    reverse = _ref.reverse,\n    textAlign = _ref.textAlign,\n    valueProp = _ref.value,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var formContext = useContext(FormContext);\n  var _formContext$useFormI = formContext.useFormInput({\n      name: name,\n      value: valueProp,\n      initialValue: ''\n    }),\n    value = _formContext$useFormI[0],\n    setValue = _formContext$useFormI[1];\n  var valueParts = useMemo(function () {\n    return parseValue(mask, value);\n  }, [mask, value]);\n  var inputRef = useForwardedRef(ref);\n  var dropRef = useRef();\n\n  // Caller's ref, if provided\n  var _useState = useState(),\n    dropPropsTarget = _useState[0],\n    setDropPropsTarget = _useState[1];\n  useEffect(function () {\n    var nextDropPropsTarget;\n    // If caller provided a ref, set to 'pending' until ref.current is defined\n    if (dropProps && 'target' in dropProps) {\n      nextDropPropsTarget = dropProps.target || 'pending';\n      setDropPropsTarget(nextDropPropsTarget);\n    }\n  }, [dropProps]);\n  var _useState2 = useState(focusProp),\n    focus = _useState2[0],\n    setFocus = _useState2[1];\n  var _useState3 = useState(),\n    activeMaskIndex = _useState3[0],\n    setActiveMaskIndex = _useState3[1];\n  var _useState4 = useState(),\n    activeOptionIndex = _useState4[0],\n    setActiveOptionIndex = _useState4[1];\n  var _useState5 = useState(),\n    showDrop = _useState5[0],\n    setShowDrop = _useState5[1];\n  useEffect(function () {\n    if (focus) {\n      var timer = setTimeout(function () {\n        // determine which mask element the caret is at\n        var caretIndex = inputRef.current.selectionStart;\n        var maskIndex;\n        valueParts.some(function (part, index) {\n          if (part.beginIndex <= caretIndex && part.endIndex >= caretIndex) {\n            maskIndex = index;\n            return true;\n          }\n          return false;\n        });\n        if (maskIndex === undefined && valueParts.length < mask.length) {\n          maskIndex = valueParts.length; // first unused one\n        }\n        if (maskIndex && mask[maskIndex].fixed) {\n          maskIndex -= 1; // fixed mask parts are never \"active\"\n        }\n        if (maskIndex !== activeMaskIndex) {\n          setActiveMaskIndex(maskIndex);\n          setActiveOptionIndex(-1);\n          setShowDrop(maskIndex >= 0 && mask[maskIndex].options && true);\n        }\n      }, 10); // 10ms empirically chosen\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n    return undefined;\n  }, [activeMaskIndex, focus, inputRef, mask, valueParts]);\n  var setInputValue = useCallback(function (nextValue) {\n    // Calling set value function directly on input because React library\n    // overrides setter `event.target.value =` and loses original event\n    // target fidelity.\n    // https://stackoverflow.com/a/46012210 &&\n    // https://github.com/grommet/grommet/pull/3171#discussion_r296415239\n    var nativeInputValueSetter = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value').set;\n    nativeInputValueSetter.call(inputRef.current, nextValue);\n    var event = new Event('input', {\n      bubbles: true\n    });\n    inputRef.current.dispatchEvent(event);\n  }, [inputRef]);\n\n  // This could be due to a paste or as the user is typing.\n  var onChangeInput = useCallback(function (event) {\n    var eventValue = event.target.value;\n    // Align with the mask.\n    var nextValueParts = parseValue(mask, eventValue);\n    var nextValue = nextValueParts.map(function (part) {\n      return part.part;\n    }).join('');\n    if (nextValue !== eventValue) {\n      // The mask adjusted the next value. If something was added,\n      // the value must be valid. Change the actual input value\n      // to correspond.\n      // This will re-trigger this callback with the next value.\n      if (nextValue.length > eventValue.length) setInputValue(nextValue);\n      // If the nextValue is shorter, something must be invalid.\n      else if (value && eventValue.length < value.length) {\n        // If the user is removing characters, preserve what the\n        // user is working on.\n        setValue(eventValue);\n        if (onChange) onChange(event);\n      } else {\n        // If the user is adding invalid characters, don't allow it.\n        // Revert to the prior value.\n        setInputValue(value);\n      }\n    } else if (value !== nextValue) {\n      setValue(nextValue);\n      if (onChange) onChange(event);\n    }\n  }, [mask, onChange, setInputValue, setValue, value]);\n  var onOption = useCallback(function (option) {\n    return function () {\n      var nextValueParts = [].concat(valueParts);\n      nextValueParts[activeMaskIndex] = {\n        part: option\n      };\n      // add any fixed parts that follow\n      var index = activeMaskIndex + 1;\n      while (index < mask.length && !nextValueParts[index] && mask[index].fixed) {\n        nextValueParts[index] = {\n          part: mask[index].fixed\n        };\n        index += 1;\n      }\n      var nextValue = nextValueParts.map(function (part) {\n        return part.part;\n      }).join('');\n      setInputValue(nextValue);\n      // restore focus to input\n      inputRef.current.focus();\n    };\n  }, [activeMaskIndex, inputRef, mask, setInputValue, valueParts]);\n  var onNextOption = useCallback(function (event) {\n    var item = mask[activeMaskIndex];\n    if (item && item.options) {\n      event.preventDefault();\n      var index = Math.min(activeOptionIndex + 1, item.options.length - 1);\n      setActiveOptionIndex(index);\n    }\n  }, [activeMaskIndex, activeOptionIndex, mask]);\n  var onPreviousOption = useCallback(function (event) {\n    if (activeMaskIndex >= 0 && mask[activeMaskIndex].options) {\n      event.preventDefault();\n      var index = Math.max(activeOptionIndex - 1, 0);\n      setActiveOptionIndex(index);\n    }\n  }, [activeMaskIndex, activeOptionIndex, mask]);\n  var onSelectOption = useCallback(function (event) {\n    if (activeMaskIndex >= 0 && activeOptionIndex >= 0) {\n      event.preventDefault();\n      var option = mask[activeMaskIndex].options[activeOptionIndex];\n      onOption(option)();\n    }\n  }, [activeMaskIndex, activeOptionIndex, mask, onOption]);\n  var onEsc = useCallback(function (event) {\n    if (showDrop) {\n      // we have to stop both synthetic events and native events\n      // drop and layer should not close by pressing esc on this input\n      event.stopPropagation();\n      event.nativeEvent.stopImmediatePropagation();\n      setShowDrop(false);\n    }\n  }, [showDrop]);\n  var onHideDrop = useCallback(function () {\n    return setShowDrop(false);\n  }, []);\n  var renderPlaceholder = function renderPlaceholder() {\n    return mask.map(function (item) {\n      return item.placeholder || item.fixed;\n    }).join('');\n  };\n  var maskedInputIcon = useSizedIcon(icon, rest.size, theme);\n  return /*#__PURE__*/React.createElement(StyledMaskedInputContainer, {\n    plain: plain\n  }, maskedInputIcon && /*#__PURE__*/React.createElement(StyledIcon, {\n    reverse: reverse,\n    theme: theme\n  }, maskedInputIcon), /*#__PURE__*/React.createElement(Keyboard, {\n    onEsc: onEsc,\n    onTab: showDrop ? function () {\n      return setShowDrop(false);\n    } : undefined,\n    onLeft: undefined,\n    onRight: undefined,\n    onUp: onPreviousOption,\n    onDown: showDrop ? onNextOption : function () {\n      return setShowDrop(true);\n    },\n    onEnter: onSelectOption,\n    onKeyDown: onKeyDown\n  }, /*#__PURE__*/React.createElement(StyledMaskedInput, _extends({\n    ref: inputRef,\n    \"aria-label\": a11yTitle,\n    id: id,\n    name: name,\n    autoComplete: \"off\",\n    focusIndicator: focusIndicator,\n    plain: plain,\n    placeholder: placeholder || renderPlaceholder(),\n    icon: icon,\n    reverse: reverse,\n    focus: focus,\n    textAlign: textAlign\n  }, rest, {\n    value: value,\n    theme: theme,\n    onFocus: function onFocus(event) {\n      setFocus(true);\n      setShowDrop(true);\n      if (_onFocus) _onFocus(event);\n    },\n    onBlur: function onBlur(event) {\n      setFocus(false);\n      // This will be called when the user clicks on a suggestion,\n      // check for that and don't remove the drop in that case.\n      // Drop will already have removed itself if the user has focused\n      // outside of the Drop.\n      if (!dropRef.current) setShowDrop(false);\n      if (_onBlur) _onBlur(event);\n    },\n    onChange: onChangeInput\n  }))), showDrop && mask[activeMaskIndex] && mask[activeMaskIndex].options &&\n  // If caller has specified dropProps.target, ensure target is defined\n  dropPropsTarget !== 'pending' && /*#__PURE__*/React.createElement(Drop, _extends({\n    id: id ? \"masked-input-drop__\" + id : undefined,\n    align: dropAlign,\n    responsive: false,\n    target: inputRef.current,\n    onClickOutside: onHideDrop,\n    onEsc: onHideDrop\n  }, dropProps), /*#__PURE__*/React.createElement(ContainerBox, {\n    ref: dropRef,\n    overflow: \"auto\",\n    dropHeight: dropHeight\n  }, mask[activeMaskIndex].options.map(function (option, index) {\n    // Determine whether the label is done as a child or\n    // as an option Button kind property.\n    var child = !theme.button.option ? /*#__PURE__*/React.createElement(Box, {\n      pad: {\n        horizontal: 'small',\n        vertical: 'xsmall'\n      }\n    }, option) : undefined;\n    // if we have a child, turn on plain, and hoverIndicator\n\n    return /*#__PURE__*/React.createElement(Box, {\n      key: option,\n      flex: false\n    }, /*#__PURE__*/React.createElement(Button, {\n      tabIndex: \"-1\",\n      onClick: onOption(option),\n      onMouseOver: function onMouseOver() {\n        return setActiveOptionIndex(index);\n      },\n      onFocus: function onFocus() {},\n      active: index === activeOptionIndex,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      hoverIndicator: !child ? undefined : 'background',\n      label: !child ? option : undefined\n    }, child));\n  }))));\n});\nMaskedInput.displayName = 'MaskedInput';\nMaskedInput.propTypes = MaskedInputPropTypes;\nexport { MaskedInput };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}