{"ast":null,"code":"var _excluded = [\"children\", \"footer\", \"onDone\", \"onTouched\", \"pad\", \"updateOn\"];\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nimport React, { useMemo, useCallback, useContext, useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Footer } from '../Footer';\nimport { Form } from '../Form';\nimport { DataContext } from '../../contexts/DataContext';\nimport { DataFormContext } from '../../contexts/DataFormContext';\nimport { MessageContext } from '../../contexts/MessageContext';\nvar HideableButton = styled(Button).withConfig({\n  displayName: \"DataForm__HideableButton\",\n  componentId: \"sc-v64e1r-0\"\n})([\"\", \"\"], function (props) {\n  return props.disabled && \"\\n  opacity: 0;\";\n});\nvar MaxForm = styled(Form).withConfig({\n  displayName: \"DataForm__MaxForm\",\n  componentId: \"sc-v64e1r-1\"\n})([\"max-width:100%;\", \"\"], function (props) {\n  return props.fill && 'max-height: 100%;';\n});\nvar hideButtonProps = {\n  'aria-hidden': true,\n  disabled: true,\n  tabIndex: -1\n};\n\n// We convert the view structure to something more flat to work better\n// with the Form inputs. These keys are how we flatten the Form value object\n// from the view object.\nexport var formSearchKey = '_search';\nexport var formSortKey = '_sort';\nexport var formRangeKey = '_range';\nexport var formStepKey = '_step';\nexport var formPageKey = '_page';\nexport var formColumnsKey = '_columns';\nexport var formGroupByKey = '_groupBy';\nexport var formViewNameKey = '_view';\nvar viewFormKeyMap = {\n  search: formSearchKey,\n  sort: formSortKey,\n  step: formStepKey,\n  page: formPageKey,\n  columns: formColumnsKey,\n  groupBy: formGroupByKey,\n  view: formViewNameKey\n};\n\n// flatten nested objects.\n// For example: { a: { b: v, c: z } } -> { 'a.b': v, 'a.c': z }\nvar flatten = function flatten(formValue, options) {\n  var result = JSON.parse(JSON.stringify(formValue));\n  Object.keys(result).forEach(function (i) {\n    // We check the type of the i using\n    // typeof() function and recursively\n    // call the function again\n    // ignore _range situations\n    if (typeof result[i] === 'object' && !Array.isArray(result[i]) && (options != null && options.full || !result[i][formRangeKey])) {\n      var temp = flatten(result[i], options);\n      Object.keys(temp).forEach(function (j) {\n        // Store temp in result\n        // ignore empty arrays\n        if (!Array.isArray(temp[j]) || Array.isArray(temp[j]) && temp[j].length) result[i + \".\" + j] = temp[j];\n      });\n      delete result[i];\n    }\n  });\n  return result;\n};\n\n// unflatten nested objects. For example: { 'a.b': v } -> { a: { b: v } }\nvar unflatten = function unflatten(formValue) {\n  var result = JSON.parse(JSON.stringify(formValue));\n  var specialKeys = Object.values(viewFormKeyMap);\n  Object.keys(result).filter(function (k) {\n    return !specialKeys.includes(k);\n  }).forEach(function (k) {\n    var parts = k.split('.');\n    var val = result[k];\n    delete result[k];\n    var parent = result;\n    while (parts.length > 1) {\n      var sub = parts.shift();\n      if (!parent[sub]) parent[sub] = {};\n      parent = parent[sub];\n    }\n    parent[parts.shift()] = val;\n  });\n  return result;\n};\n\n// converts from the external view format to the internal Form value format\nvar viewToFormValue = function viewToFormValue(view) {\n  var result = _extends({}, (view == null ? void 0 : view.properties) || {});\n  // convert { min: , max: } range to [min, max] for RangeSelector\n  Object.keys(result).forEach(function (key) {\n    var _result$key, _result$key2;\n    if (typeof ((_result$key = result[key]) == null ? void 0 : _result$key.min) === 'number' || typeof ((_result$key2 = result[key]) == null ? void 0 : _result$key2.max) === 'number') {\n      var _result$key3;\n      result[key] = (_result$key3 = {}, _result$key3[formRangeKey] = [result[key].min, result[key].max], _result$key3);\n    }\n  });\n\n  // convert formal view keys to their form '_' prefixed counterparts\n  Object.keys(viewFormKeyMap).forEach(function (key) {\n    if (view != null && view[key]) result[viewFormKeyMap[key]] = view[key];\n  });\n  // always have some blank search text\n  if (!result[formSearchKey]) result[formSearchKey] = '';\n  if (view != null && view.sort) result[formSortKey] = view.sort;\n  if (view != null && view.name) result[formViewNameKey] = view.name;\n  if (view != null && view.columns) result[formColumnsKey] = view.columns;\n  if (view != null && view.groupBy) result[formGroupByKey] = view.groupBy;\n  return unflatten(result);\n};\n\n// converts from the internal Form value format to the external view format\nvar formValueToView = function formValueToView(value, views) {\n  var result = {};\n\n  // if the user chose a view, use that\n  if (value[formViewNameKey]) result = JSON.parse(JSON.stringify(views.find(function (v) {\n    return v.name === value[formViewNameKey];\n  })));\n  var valueCopy = _extends({}, value);\n  Object.keys(viewFormKeyMap).forEach(function (key) {\n    if (valueCopy[viewFormKeyMap[key]]) {\n      result[key] = valueCopy[viewFormKeyMap[key]];\n    }\n    delete valueCopy[viewFormKeyMap[key]];\n  });\n\n  // flatten any nested objects\n  var flatValue = flatten(valueCopy);\n  result.properties = _extends({}, result.properties || {}, flatValue);\n\n  // convert any ranges\n  Object.keys(result.properties).forEach(function (key) {\n    if (result.properties[key][formRangeKey]) {\n      result.properties[key] = {\n        min: result.properties[key][formRangeKey][0],\n        max: result.properties[key][formRangeKey][1]\n      };\n    }\n  });\n  return result;\n};\n\n// remove any empty arrays of property values by deleting the key for\n// that property in the view properties\nvar clearEmpty = function clearEmpty(formValue) {\n  var value = formValue;\n  Object.keys(value).forEach(function (k) {\n    if (Array.isArray(value[k]) && value[k].length === 0) delete value[k];\n  });\n  return value;\n};\n\n// if paging, when anything other than the page changes, reset the page to 1\nvar resetPage = function resetPage(nextFormValue, prevFormValue) {\n  if (prevFormValue[formPageKey] && prevFormValue[formPageKey] > 1)\n    // eslint-disable-next-line no-param-reassign\n    nextFormValue[formPageKey] = 1;\n};\nvar transformTouched = function transformTouched(touched, value) {\n  // DataFilters expects values for keys touched to evaluate to falsey to\n  // not cause a badge. However any property value that is set back to its\n  // default/initial value that isn't undefined/null/false/0 will cause a\n  // badge this is particulary true for a 'range' which will always have\n  // a value.\n  //\n  // Should this instead determine touched by comparing against\n  // initial/default values?\n  //\n  var result = {};\n  Object.keys(touched).forEach(function (key) {\n    result[key] = flatten(value, {\n      full: true\n    })[key];\n  });\n  return result;\n};\n\n// function shared by onSubmit and onChange to coordinate view\n// name changes\nvar normalizeValue = function normalizeValue(nextValue, prevValue, views) {\n  if (nextValue[formViewNameKey] && nextValue[formViewNameKey] !== prevValue[formViewNameKey]) {\n    // view name changed, reset view contents from named view\n    return viewToFormValue(views.find(function (v) {\n      return v.name === nextValue[formViewNameKey];\n    }));\n  }\n  // something else changed\n\n  // clear empty properties\n  var result = clearEmpty(nextValue);\n\n  // if we have a view and something related to it changed, clear the view\n  if (result[formViewNameKey]) {\n    var view = views.find(function (v) {\n      return v.name === result[formViewNameKey];\n    });\n    var viewValue = viewToFormValue(view);\n    clearEmpty(viewValue);\n    if (Object.keys(viewValue).some(function (k) {\n      return (\n        // allow mismatch between empty and set strings\n        viewValue[k] && result[k] && JSON.stringify(result[k]) !== JSON.stringify(viewValue[k])\n      );\n    })) {\n      delete result[formViewNameKey];\n    }\n  }\n  return result;\n};\n\n// 300ms was chosen empirically as a reasonable default\nvar DEBOUNCE_TIMEOUT = 300;\nvar debounce = function debounce(func, timeout) {\n  if (timeout === void 0) {\n    timeout = DEBOUNCE_TIMEOUT;\n  }\n  var timer;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    clearTimeout(timer);\n    timer = setTimeout(function () {\n      func.apply(void 0, args);\n    }, timeout);\n  };\n};\nvar debounceSearch = debounce(function (onView, nextValue, views) {\n  return onView(formValueToView(nextValue, views));\n});\nexport var DataForm = function DataForm(_ref) {\n  var children = _ref.children,\n    footer = _ref.footer,\n    onDone = _ref.onDone,\n    onTouched = _ref.onTouched,\n    pad = _ref.pad,\n    _ref$updateOn = _ref.updateOn,\n    updateOn = _ref$updateOn === void 0 ? 'submit' : _ref$updateOn,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var _useContext = useContext(DataContext),\n    messages = _useContext.messages,\n    onView = _useContext.onView,\n    view = _useContext.view,\n    views = _useContext.views;\n  var _useContext2 = useContext(MessageContext),\n    format = _useContext2.format;\n  var _useState = useState(viewToFormValue(view)),\n    formValue = _useState[0],\n    setFormValue = _useState[1];\n  var _useState2 = useState(),\n    changed = _useState2[0],\n    setChanged = _useState2[1];\n  var contextValue = useMemo(function () {\n    return {\n      inDataForm: true\n    };\n  }, []);\n  var onSubmit = useCallback(function (_ref2) {\n    var value = _ref2.value,\n      touched = _ref2.touched;\n    var nextValue = normalizeValue(value, formValue, views);\n    resetPage(nextValue, formValue);\n    setFormValue(nextValue);\n    setChanged(false);\n    if (onTouched) onTouched(transformTouched(touched, nextValue));\n    onView(formValueToView(nextValue, views));\n    if (onDone) onDone();\n  }, [formValue, onDone, onTouched, onView, views]);\n  var onChange = useCallback(function (value, _ref3) {\n    var touched = _ref3.touched;\n    var nextValue = normalizeValue(value, formValue, views);\n    resetPage(nextValue, formValue);\n    setFormValue(nextValue);\n    setChanged(true);\n    if (updateOn === 'change') {\n      if (onTouched) onTouched(transformTouched(touched, nextValue));\n      // debounce search\n      if (touched[formSearchKey]) {\n        debounceSearch(onView, nextValue, views);\n      } else {\n        onView(formValueToView(nextValue, views));\n      }\n    }\n  }, [formValue, onTouched, onView, updateOn, views]);\n  var onReset = useCallback(function () {\n    setFormValue(viewToFormValue(view));\n    setChanged(false);\n  }, [view]);\n  useEffect(function () {\n    return setFormValue(viewToFormValue(view));\n  }, [view]);\n  var content = children;\n  if (footer !== false && updateOn === 'submit' || pad) {\n    content = /*#__PURE__*/React.createElement(Box, {\n      fill: \"vertical\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: true,\n      overflow: \"auto\",\n      pad: {\n        horizontal: pad,\n        top: pad\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: false\n    }, content)), footer !== false && updateOn === 'submit' && /*#__PURE__*/React.createElement(Footer, {\n      flex: false,\n      margin: {\n        top: 'medium'\n      },\n      pad: {\n        horizontal: pad,\n        bottom: pad\n      },\n      gap: \"small\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      label: format({\n        id: 'dataForm.submit',\n        messages: messages == null ? void 0 : messages.dataForm\n      }),\n      type: \"submit\",\n      primary: true\n    }), /*#__PURE__*/React.createElement(HideableButton, _extends({\n      label: format({\n        id: 'dataForm.reset',\n        messages: messages == null ? void 0 : messages.dataForm\n      }),\n      type: \"reset\",\n      onClick: onReset\n    }, !changed ? hideButtonProps : {}))));\n  }\n  return /*#__PURE__*/React.createElement(MaxForm, _extends({}, rest, {\n    value: formValue,\n    onSubmit: updateOn === 'submit' ? onSubmit : undefined,\n    onChange: onChange\n  }), /*#__PURE__*/React.createElement(DataFormContext.Provider, {\n    value: contextValue\n  }, content));\n};","map":{"version":3,"names":["_excluded","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","_extends","assign","bind","arguments","prototype","hasOwnProperty","call","apply","React","useMemo","useCallback","useContext","useEffect","useState","styled","Box","Button","Footer","Form","DataContext","DataFormContext","MessageContext","HideableButton","withConfig","displayName","componentId","props","disabled","MaxForm","fill","hideButtonProps","tabIndex","formSearchKey","formSortKey","formRangeKey","formStepKey","formPageKey","formColumnsKey","formGroupByKey","formViewNameKey","viewFormKeyMap","search","sort","step","page","columns","groupBy","view","flatten","formValue","options","result","JSON","parse","stringify","forEach","Array","isArray","full","temp","j","unflatten","specialKeys","values","filter","k","includes","parts","split","val","parent","sub","shift","viewToFormValue","properties","_result$key","_result$key2","min","max","_result$key3","name","formValueToView","value","views","find","v","valueCopy","flatValue","clearEmpty","resetPage","nextFormValue","prevFormValue","transformTouched","touched","normalizeValue","nextValue","prevValue","viewValue","some","DEBOUNCE_TIMEOUT","debounce","func","timeout","timer","_len","args","_key","clearTimeout","setTimeout","debounceSearch","onView","DataForm","_ref","children","footer","onDone","onTouched","pad","_ref$updateOn","updateOn","rest","_useContext","messages","_useContext2","format","_useState","setFormValue","_useState2","changed","setChanged","contextValue","inDataForm","onSubmit","_ref2","onChange","_ref3","onReset","content","createElement","flex","overflow","horizontal","top","margin","bottom","gap","label","id","dataForm","type","primary","onClick","undefined","Provider"],"sources":["/Users/kyle/projects/personal/hpe-react-practice/node_modules/grommet/es6/components/Data/DataForm.js"],"sourcesContent":["var _excluded = [\"children\", \"footer\", \"onDone\", \"onTouched\", \"pad\", \"updateOn\"];\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport React, { useMemo, useCallback, useContext, useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Footer } from '../Footer';\nimport { Form } from '../Form';\nimport { DataContext } from '../../contexts/DataContext';\nimport { DataFormContext } from '../../contexts/DataFormContext';\nimport { MessageContext } from '../../contexts/MessageContext';\nvar HideableButton = styled(Button).withConfig({\n  displayName: \"DataForm__HideableButton\",\n  componentId: \"sc-v64e1r-0\"\n})([\"\", \"\"], function (props) {\n  return props.disabled && \"\\n  opacity: 0;\";\n});\nvar MaxForm = styled(Form).withConfig({\n  displayName: \"DataForm__MaxForm\",\n  componentId: \"sc-v64e1r-1\"\n})([\"max-width:100%;\", \"\"], function (props) {\n  return props.fill && 'max-height: 100%;';\n});\nvar hideButtonProps = {\n  'aria-hidden': true,\n  disabled: true,\n  tabIndex: -1\n};\n\n// We convert the view structure to something more flat to work better\n// with the Form inputs. These keys are how we flatten the Form value object\n// from the view object.\nexport var formSearchKey = '_search';\nexport var formSortKey = '_sort';\nexport var formRangeKey = '_range';\nexport var formStepKey = '_step';\nexport var formPageKey = '_page';\nexport var formColumnsKey = '_columns';\nexport var formGroupByKey = '_groupBy';\nexport var formViewNameKey = '_view';\nvar viewFormKeyMap = {\n  search: formSearchKey,\n  sort: formSortKey,\n  step: formStepKey,\n  page: formPageKey,\n  columns: formColumnsKey,\n  groupBy: formGroupByKey,\n  view: formViewNameKey\n};\n\n// flatten nested objects.\n// For example: { a: { b: v, c: z } } -> { 'a.b': v, 'a.c': z }\nvar flatten = function flatten(formValue, options) {\n  var result = JSON.parse(JSON.stringify(formValue));\n  Object.keys(result).forEach(function (i) {\n    // We check the type of the i using\n    // typeof() function and recursively\n    // call the function again\n    // ignore _range situations\n    if (typeof result[i] === 'object' && !Array.isArray(result[i]) && (options != null && options.full || !result[i][formRangeKey])) {\n      var temp = flatten(result[i], options);\n      Object.keys(temp).forEach(function (j) {\n        // Store temp in result\n        // ignore empty arrays\n        if (!Array.isArray(temp[j]) || Array.isArray(temp[j]) && temp[j].length) result[i + \".\" + j] = temp[j];\n      });\n      delete result[i];\n    }\n  });\n  return result;\n};\n\n// unflatten nested objects. For example: { 'a.b': v } -> { a: { b: v } }\nvar unflatten = function unflatten(formValue) {\n  var result = JSON.parse(JSON.stringify(formValue));\n  var specialKeys = Object.values(viewFormKeyMap);\n  Object.keys(result).filter(function (k) {\n    return !specialKeys.includes(k);\n  }).forEach(function (k) {\n    var parts = k.split('.');\n    var val = result[k];\n    delete result[k];\n    var parent = result;\n    while (parts.length > 1) {\n      var sub = parts.shift();\n      if (!parent[sub]) parent[sub] = {};\n      parent = parent[sub];\n    }\n    parent[parts.shift()] = val;\n  });\n  return result;\n};\n\n// converts from the external view format to the internal Form value format\nvar viewToFormValue = function viewToFormValue(view) {\n  var result = _extends({}, (view == null ? void 0 : view.properties) || {});\n  // convert { min: , max: } range to [min, max] for RangeSelector\n  Object.keys(result).forEach(function (key) {\n    var _result$key, _result$key2;\n    if (typeof ((_result$key = result[key]) == null ? void 0 : _result$key.min) === 'number' || typeof ((_result$key2 = result[key]) == null ? void 0 : _result$key2.max) === 'number') {\n      var _result$key3;\n      result[key] = (_result$key3 = {}, _result$key3[formRangeKey] = [result[key].min, result[key].max], _result$key3);\n    }\n  });\n\n  // convert formal view keys to their form '_' prefixed counterparts\n  Object.keys(viewFormKeyMap).forEach(function (key) {\n    if (view != null && view[key]) result[viewFormKeyMap[key]] = view[key];\n  });\n  // always have some blank search text\n  if (!result[formSearchKey]) result[formSearchKey] = '';\n  if (view != null && view.sort) result[formSortKey] = view.sort;\n  if (view != null && view.name) result[formViewNameKey] = view.name;\n  if (view != null && view.columns) result[formColumnsKey] = view.columns;\n  if (view != null && view.groupBy) result[formGroupByKey] = view.groupBy;\n  return unflatten(result);\n};\n\n// converts from the internal Form value format to the external view format\nvar formValueToView = function formValueToView(value, views) {\n  var result = {};\n\n  // if the user chose a view, use that\n  if (value[formViewNameKey]) result = JSON.parse(JSON.stringify(views.find(function (v) {\n    return v.name === value[formViewNameKey];\n  })));\n  var valueCopy = _extends({}, value);\n  Object.keys(viewFormKeyMap).forEach(function (key) {\n    if (valueCopy[viewFormKeyMap[key]]) {\n      result[key] = valueCopy[viewFormKeyMap[key]];\n    }\n    delete valueCopy[viewFormKeyMap[key]];\n  });\n\n  // flatten any nested objects\n  var flatValue = flatten(valueCopy);\n  result.properties = _extends({}, result.properties || {}, flatValue);\n\n  // convert any ranges\n  Object.keys(result.properties).forEach(function (key) {\n    if (result.properties[key][formRangeKey]) {\n      result.properties[key] = {\n        min: result.properties[key][formRangeKey][0],\n        max: result.properties[key][formRangeKey][1]\n      };\n    }\n  });\n  return result;\n};\n\n// remove any empty arrays of property values by deleting the key for\n// that property in the view properties\nvar clearEmpty = function clearEmpty(formValue) {\n  var value = formValue;\n  Object.keys(value).forEach(function (k) {\n    if (Array.isArray(value[k]) && value[k].length === 0) delete value[k];\n  });\n  return value;\n};\n\n// if paging, when anything other than the page changes, reset the page to 1\nvar resetPage = function resetPage(nextFormValue, prevFormValue) {\n  if (prevFormValue[formPageKey] && prevFormValue[formPageKey] > 1)\n    // eslint-disable-next-line no-param-reassign\n    nextFormValue[formPageKey] = 1;\n};\nvar transformTouched = function transformTouched(touched, value) {\n  // DataFilters expects values for keys touched to evaluate to falsey to\n  // not cause a badge. However any property value that is set back to its\n  // default/initial value that isn't undefined/null/false/0 will cause a\n  // badge this is particulary true for a 'range' which will always have\n  // a value.\n  //\n  // Should this instead determine touched by comparing against\n  // initial/default values?\n  //\n  var result = {};\n  Object.keys(touched).forEach(function (key) {\n    result[key] = flatten(value, {\n      full: true\n    })[key];\n  });\n  return result;\n};\n\n// function shared by onSubmit and onChange to coordinate view\n// name changes\nvar normalizeValue = function normalizeValue(nextValue, prevValue, views) {\n  if (nextValue[formViewNameKey] && nextValue[formViewNameKey] !== prevValue[formViewNameKey]) {\n    // view name changed, reset view contents from named view\n    return viewToFormValue(views.find(function (v) {\n      return v.name === nextValue[formViewNameKey];\n    }));\n  }\n  // something else changed\n\n  // clear empty properties\n  var result = clearEmpty(nextValue);\n\n  // if we have a view and something related to it changed, clear the view\n  if (result[formViewNameKey]) {\n    var view = views.find(function (v) {\n      return v.name === result[formViewNameKey];\n    });\n    var viewValue = viewToFormValue(view);\n    clearEmpty(viewValue);\n    if (Object.keys(viewValue).some(function (k) {\n      return (\n        // allow mismatch between empty and set strings\n        viewValue[k] && result[k] && JSON.stringify(result[k]) !== JSON.stringify(viewValue[k])\n      );\n    })) {\n      delete result[formViewNameKey];\n    }\n  }\n  return result;\n};\n\n// 300ms was chosen empirically as a reasonable default\nvar DEBOUNCE_TIMEOUT = 300;\nvar debounce = function debounce(func, timeout) {\n  if (timeout === void 0) {\n    timeout = DEBOUNCE_TIMEOUT;\n  }\n  var timer;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    clearTimeout(timer);\n    timer = setTimeout(function () {\n      func.apply(void 0, args);\n    }, timeout);\n  };\n};\nvar debounceSearch = debounce(function (onView, nextValue, views) {\n  return onView(formValueToView(nextValue, views));\n});\nexport var DataForm = function DataForm(_ref) {\n  var children = _ref.children,\n    footer = _ref.footer,\n    onDone = _ref.onDone,\n    onTouched = _ref.onTouched,\n    pad = _ref.pad,\n    _ref$updateOn = _ref.updateOn,\n    updateOn = _ref$updateOn === void 0 ? 'submit' : _ref$updateOn,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var _useContext = useContext(DataContext),\n    messages = _useContext.messages,\n    onView = _useContext.onView,\n    view = _useContext.view,\n    views = _useContext.views;\n  var _useContext2 = useContext(MessageContext),\n    format = _useContext2.format;\n  var _useState = useState(viewToFormValue(view)),\n    formValue = _useState[0],\n    setFormValue = _useState[1];\n  var _useState2 = useState(),\n    changed = _useState2[0],\n    setChanged = _useState2[1];\n  var contextValue = useMemo(function () {\n    return {\n      inDataForm: true\n    };\n  }, []);\n  var onSubmit = useCallback(function (_ref2) {\n    var value = _ref2.value,\n      touched = _ref2.touched;\n    var nextValue = normalizeValue(value, formValue, views);\n    resetPage(nextValue, formValue);\n    setFormValue(nextValue);\n    setChanged(false);\n    if (onTouched) onTouched(transformTouched(touched, nextValue));\n    onView(formValueToView(nextValue, views));\n    if (onDone) onDone();\n  }, [formValue, onDone, onTouched, onView, views]);\n  var onChange = useCallback(function (value, _ref3) {\n    var touched = _ref3.touched;\n    var nextValue = normalizeValue(value, formValue, views);\n    resetPage(nextValue, formValue);\n    setFormValue(nextValue);\n    setChanged(true);\n    if (updateOn === 'change') {\n      if (onTouched) onTouched(transformTouched(touched, nextValue));\n      // debounce search\n      if (touched[formSearchKey]) {\n        debounceSearch(onView, nextValue, views);\n      } else {\n        onView(formValueToView(nextValue, views));\n      }\n    }\n  }, [formValue, onTouched, onView, updateOn, views]);\n  var onReset = useCallback(function () {\n    setFormValue(viewToFormValue(view));\n    setChanged(false);\n  }, [view]);\n  useEffect(function () {\n    return setFormValue(viewToFormValue(view));\n  }, [view]);\n  var content = children;\n  if (footer !== false && updateOn === 'submit' || pad) {\n    content = /*#__PURE__*/React.createElement(Box, {\n      fill: \"vertical\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: true,\n      overflow: \"auto\",\n      pad: {\n        horizontal: pad,\n        top: pad\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: false\n    }, content)), footer !== false && updateOn === 'submit' && /*#__PURE__*/React.createElement(Footer, {\n      flex: false,\n      margin: {\n        top: 'medium'\n      },\n      pad: {\n        horizontal: pad,\n        bottom: pad\n      },\n      gap: \"small\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      label: format({\n        id: 'dataForm.submit',\n        messages: messages == null ? void 0 : messages.dataForm\n      }),\n      type: \"submit\",\n      primary: true\n    }), /*#__PURE__*/React.createElement(HideableButton, _extends({\n      label: format({\n        id: 'dataForm.reset',\n        messages: messages == null ? void 0 : messages.dataForm\n      }),\n      type: \"reset\",\n      onClick: onReset\n    }, !changed ? hideButtonProps : {}))));\n  }\n  return /*#__PURE__*/React.createElement(MaxForm, _extends({}, rest, {\n    value: formValue,\n    onSubmit: updateOn === 'submit' ? onSubmit : undefined,\n    onChange: onChange\n  }), /*#__PURE__*/React.createElement(DataFormContext.Provider, {\n    value: contextValue\n  }, content));\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}