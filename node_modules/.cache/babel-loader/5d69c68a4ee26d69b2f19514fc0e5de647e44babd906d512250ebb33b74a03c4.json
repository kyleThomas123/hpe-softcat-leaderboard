{"ast":null,"code":"var _excluded = [\"active\", \"align\", \"aria-label\", \"badge\", \"busy\", \"color\", \"children\", \"disabled\", \"icon\", \"focusIndicator\", \"gap\", \"fill\", \"href\", \"justify\", \"kind\", \"label\", \"messages\", \"onBlur\", \"onClick\", \"onFocus\", \"onMouseOut\", \"onMouseOver\", \"pad\", \"plain\", \"primary\", \"reverse\", \"secondary\", \"selected\", \"size\", \"success\", \"tip\", \"type\", \"a11yTitle\", \"as\"];\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nimport React, { cloneElement, Children, forwardRef, useContext, useMemo, useState, useCallback, useEffect } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { backgroundAndTextColors, colorIsDark, findButtonParent, useSizedIcon, normalizeBackground, normalizeColor } from '../../utils';\nimport { defaultProps } from '../../default-props';\nimport { ButtonPropTypes } from './propTypes';\nimport { AnnounceContext } from '../../contexts/AnnounceContext';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { Box } from '../Box';\nimport { Tip } from '../Tip';\nimport { Badge } from './Badge';\nimport { StyledButton } from './StyledButton';\nimport { StyledButtonKind } from './StyledButtonKind';\nimport { useAnalytics } from '../../contexts/AnalyticsContext';\nimport { Skeleton, useSkeleton } from '../Skeleton';\nimport { EllipsisAnimation, GrowCheckmark, StyledBusyContents } from './BusyAnimation';\nvar RelativeBox = styled(Box).withConfig({\n  displayName: \"Button__RelativeBox\",\n  componentId: \"sc-zuqsuw-0\"\n})([\"position:relative;\"]);\n\n// We have two Styled* components to separate\n// the newer default|primary|secondary approach,\n// which we use the term \"kind\" to refer to,\n// from the previous approach. Hopefully, when we get to grommet v3,\n// we can drop the old way and just use kind.\n//\n// In the kind approach, we rely on the basic structure of the theme\n// being repeated. For example: button.default, button.active,\n// button.active.default all refer to a similar object containing\n// { background, border, color, padding }.\n// This allows us to use the same code to evaluate color and generate CSS.\n// We just need to build up CSS, since selectors override previous ones.\n// See StyledButtonKind.kindStyles() for this.\n// And we build down to determine icon color, once we have a color from\n// the latest applicable state, we can stop. See Button.getIconColor() for this.\n// backgroundAndTextColor() is used in both cases to ensure we are determining\n// color in the same way, so the icon and label align.\n\n// only when default is in the theme\n// Used to get the color for the icon to match what StyledButtonKind\n// and backgroundStyle() will do for the label.\n// The paths are ordered from basic to specific. Go through them\n// specific to base until we find one that has a color and use that.\nvar getIconColor = function getIconColor(paths, theme, colorProp, kind) {\n  if (paths === void 0) {\n    paths = [];\n  }\n  var result = [];\n  var index = paths.length - 1;\n  // caller has specified a themeObj to use for styling\n  // relevant for cases like pagination which looks to theme.pagination.button\n  if (typeof kind === 'object') index = 0;\n  // stop when we have a color or no more paths\n  while (index >= 0 && !result[1]) {\n    var baseObj = typeof kind === 'object' && kind || theme.button;\n    var obj = baseObj;\n    // find sub-object under the button theme that corresponds with this path\n    // for example: 'active.primary'\n    if (paths[index]) {\n      var parts = paths[index].split('.');\n      while (obj && parts.length) obj = obj[parts.shift()];\n    }\n    if (obj) {\n      var _obj;\n      // use passed in color for background if the theme has a background color\n      var background = colorProp && obj.background && obj.background.color ? colorProp : obj.background;\n\n      // if theme object explicitly sets the color to undefined, pass false\n      // to indicate that the theme doesn't want any text color\n      var objColor = obj.color || (Object.prototype.hasOwnProperty.call(obj, 'color') && obj.color === undefined ? false : undefined);\n      var color = void 0;\n      if ((_obj = obj) != null && (_obj = _obj.icon) != null && (_obj = _obj.props) != null && _obj.color) color = obj.icon.props.color;\n      // if no icon defined for this state, see if there is an icon\n      // with color defined at one higher level\n      else if (paths[index + 1]) {\n        var _obj2;\n        var _parts = paths[index + 1].split('.');\n        while (baseObj && _parts.length) obj = baseObj[_parts.shift()];\n        if ((_obj2 = obj) != null && (_obj2 = _obj2.icon) != null && (_obj2 = _obj2.props) != null && _obj2.color) color = obj.icon.props.color;\n      }\n      // use passed in color for text if the theme doesn't have\n      // background or border color\n      if (!color) color = colorProp && (!obj.background || !obj.background.color) && (!obj.border || !obj.border.color) ? colorProp : objColor;\n      result = backgroundAndTextColors(background, color, theme);\n    }\n    index -= 1;\n  }\n  return result[1] || undefined;\n};\n\n// get the icon for the current button state\nvar getKindIcon = function getKindIcon(paths, theme, kind) {\n  if (paths === void 0) {\n    paths = [];\n  }\n  var result;\n  var index = paths.length - 1;\n  // caller has specified a themeObj to use for styling\n  // relevant for cases like pagination which looks to theme.pagination.button\n  if (typeof kind === 'object') index = 0;\n  // stop when we have a color or no more paths\n  while (index >= 0 && !result) {\n    var _obj3;\n    var obj = typeof kind === 'object' && kind || theme.button;\n    // find sub-object under the button theme that corresponds with this path\n    // for example: 'active.primary'\n    if (paths[index]) {\n      var parts = paths[index].split('.');\n      while (obj && parts.length) obj = obj[parts.shift()];\n    }\n    if ((_obj3 = obj) != null && _obj3.icon) result = obj.icon;\n    index -= 1;\n  }\n  return result || undefined;\n};\nvar getPropertyColor = function getPropertyColor(property, paths, theme, kind, primary) {\n  if (paths === void 0) {\n    paths = [];\n  }\n  var result;\n  if (kind) {\n    var obj = typeof kind === 'object' && kind || theme.button;\n    // index 0 is default state\n    if (paths[0]) {\n      var parts = paths[0].split('.');\n      while (obj && parts.length) obj = obj[parts.shift()];\n    }\n    if (obj) {\n      result = obj[property] || obj[property] && obj[property].color;\n    }\n  } else if (primary && theme && theme.button && theme.button.primary) {\n    result = theme.button.primary[property] || theme.button.primary[property] && theme.button.primary[property].color;\n  } else {\n    result = theme && theme.button && theme.button[property] || theme && theme.button && theme.button[property] && theme.button[property].color;\n  }\n  return result;\n};\nvar Button = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _theme$button$kind, _theme$button2;\n  var active = _ref.active,\n    _ref$align = _ref.align,\n    align = _ref$align === void 0 ? 'center' : _ref$align,\n    ariaLabel = _ref['aria-label'],\n    badgeProp = _ref.badge,\n    busy = _ref.busy,\n    color = _ref.color,\n    children = _ref.children,\n    disabled = _ref.disabled,\n    icon = _ref.icon,\n    _ref$focusIndicator = _ref.focusIndicator,\n    focusIndicator = _ref$focusIndicator === void 0 ? true : _ref$focusIndicator,\n    gap = _ref.gap,\n    fill = _ref.fill,\n    href = _ref.href,\n    justify = _ref.justify,\n    kindArg = _ref.kind,\n    label = _ref.label,\n    messages = _ref.messages,\n    _onBlur = _ref.onBlur,\n    onClickProp = _ref.onClick,\n    _onFocus = _ref.onFocus,\n    onMouseOut = _ref.onMouseOut,\n    onMouseOver = _ref.onMouseOver,\n    pad = _ref.pad,\n    plain = _ref.plain,\n    primary = _ref.primary,\n    reverseProp = _ref.reverse,\n    secondary = _ref.secondary,\n    selected = _ref.selected,\n    sizeProp = _ref.size,\n    success = _ref.success,\n    tip = _ref.tip,\n    _ref$type = _ref.type,\n    type = _ref$type === void 0 ? 'button' : _ref$type,\n    _ref$a11yTitle = _ref.a11yTitle,\n    a11yTitle = _ref$a11yTitle === void 0 ? typeof tip === 'string' ? tip : undefined : _ref$a11yTitle,\n    as = _ref.as,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var _useState = useState(),\n    focus = _useState[0],\n    setFocus = _useState[1];\n  var _useState2 = useState(false),\n    hover = _useState2[0],\n    setHover = _useState2[1];\n  var announce = useContext(AnnounceContext);\n  var _useContext = useContext(MessageContext),\n    format = _useContext.format;\n  if (busy && success) {\n    console.warn('Button cannot have both busy and success set to true.');\n  }\n  useEffect(function () {\n    if (busy) announce(format({\n      id: 'button.busy',\n      messages: messages\n    }));else if (success) announce(format({\n      id: 'button.success',\n      messages: messages\n    }));\n  }, [announce, busy, format, messages, success]);\n  if ((icon || label) && children) {\n    console.warn('Button should not have children if icon or label is provided');\n  }\n  var skeleton = useSkeleton();\n  var sendAnalytics = useAnalytics();\n  var onClick = useCallback(function (event) {\n    sendAnalytics({\n      type: 'buttonClick',\n      element: findButtonParent(event.target),\n      event: event,\n      href: href,\n      label: typeof label === 'string' ? label : undefined\n    });\n    if (onClickProp) onClickProp(event);\n  }, [onClickProp, sendAnalytics, href, label]);\n\n  // kindArg is object if we are referencing a theme object\n  // outside of theme.button\n  var kindObj = useMemo(function () {\n    return typeof kindArg === 'object';\n  }, [kindArg]);\n\n  // if the theme has button.default, what kind of Button is this\n  var kind = useMemo(function () {\n    if (theme.button[\"default\"] || kindObj) {\n      if (kindArg) return kindArg;\n      if (primary) return 'primary';\n      if (secondary) return 'secondary';\n      return 'default';\n    }\n    return undefined; // pre-default, no kind\n  }, [kindArg, kindObj, primary, secondary, theme]);\n\n  // for backwards compatibility, no-kind button theme did not\n  // default to size \"medium\" on buttons with no size prop\n  var size = sizeProp || kind && 'medium' || undefined;\n  // When we have a kind and are not plain, themePaths stores the relative\n  // paths within the theme for the current kind and state of the button.\n  // These paths are used with getIconColor() above and kindStyle() within\n  // StyledButtonKind.\n  var themePaths = useMemo(function () {\n    if (!kind || plain) return undefined;\n    var result = {\n      base: [],\n      hover: []\n    };\n    if (!kindObj) result.base.push(kind);\n    if (selected) {\n      result.base.push('selected');\n      if (!kindObj) result.base.push(\"selected.\" + kind);\n    }\n    if (disabled) {\n      result.base.push('disabled');\n      if (!kindObj) result.base.push(\"disabled.\" + kind);\n    } else {\n      if (active) {\n        result.base.push('active');\n        if (!kindObj) result.base.push(\"active.\" + kind);\n      }\n      result.hover.push('hover');\n      if (!kindObj) result.hover.push(\"hover.\" + kind);\n      if (active) {\n        result.hover.push(\"hover.active\");\n        if (!kindObj) {\n          result.hover.push(\"hover.active.\" + kind);\n        }\n      }\n    }\n    return result;\n  }, [active, disabled, kind, kindObj, plain, selected]);\n\n  // only used when theme does not have button.default\n  var isDarkBackground = function isDarkBackground() {\n    var backgroundColor = normalizeBackground(normalizeColor(color || theme.button.primary && theme.button.primary.color || theme.global.colors.control || 'brand', theme), theme);\n    return colorIsDark(backgroundColor, theme);\n  };\n  var onMouseOverButton = function onMouseOverButton(event) {\n    setHover(true);\n    if (onMouseOver) {\n      onMouseOver(event);\n    }\n  };\n  var onMouseOutButton = function onMouseOutButton(event) {\n    setHover(false);\n    if (onMouseOut) {\n      onMouseOut(event);\n    }\n  };\n  var kindIcon = hover && getKindIcon(themePaths == null ? void 0 : themePaths.hover, theme, kind) || getKindIcon(themePaths == null ? void 0 : themePaths.base, theme, kind);\n  var buttonIcon = icon || kindIcon;\n  // only change color if user did not specify the color themselves...\n  if (icon && !icon.props.color) {\n    if (kind) {\n      if (!plain) {\n        // match what the label will use\n        var iconColor = hover && getIconColor(themePaths.hover, theme) || getIconColor(themePaths.base, theme, color, kind);\n        if (iconColor) buttonIcon = /*#__PURE__*/cloneElement(icon, {\n          color: iconColor\n        });\n      }\n    } else if (primary) {\n      buttonIcon = /*#__PURE__*/cloneElement(icon, {\n        color: theme.global.colors.text[isDarkBackground() ? 'dark' : 'light']\n      });\n    }\n  } else if (kindIcon && !plain) {\n    var _iconColor = hover && getIconColor(themePaths.hover, theme) || getIconColor(themePaths.base, theme, color, kind);\n    if (_iconColor) buttonIcon = /*#__PURE__*/cloneElement(kindIcon, {\n      color: _iconColor\n    });\n  }\n  buttonIcon = useSizedIcon(buttonIcon, size, theme);\n  if (skeleton) {\n    var _theme$text, _theme$button$size;\n    return /*#__PURE__*/React.createElement(Skeleton, _extends({\n      ref: ref,\n      height: ((_theme$text = theme.text[size || 'medium']) == null ? void 0 : _theme$text.height) || size,\n      a11yTitle: a11yTitle\n    }, rest, (_theme$button$size = theme.button.size) == null ? void 0 : _theme$button$size[size || 'medium'], theme.button.skeleton));\n  }\n  var reverse = reverseProp != null ? reverseProp : (_theme$button$kind = theme.button[kind]) == null ? void 0 : _theme$button$kind.reverse;\n  var domTag = !as && href ? 'a' : as;\n  var first = reverse ? label : buttonIcon;\n  var second = reverse ? buttonIcon : label;\n  var contents;\n  if (first && second) {\n    var _theme$button;\n    contents = /*#__PURE__*/React.createElement(Box, {\n      direction: ((_theme$button = theme.button) == null || (_theme$button = _theme$button[kind]) == null ? void 0 : _theme$button.direction) || 'row',\n      align: \"center\",\n      justify: justify || (align === 'center' ? 'center' : 'between'),\n      gap: gap || theme.button.gap,\n      responsive: false\n    }, first, second);\n  } else if (typeof children === 'function') {\n    contents = children({\n      disabled: disabled,\n      hover: hover,\n      focus: focus\n    });\n  } else {\n    contents = first || second || children;\n  }\n  var background = getPropertyColor('background', themePaths && themePaths.base, theme, kind, primary);\n  var border = getPropertyColor('border', themePaths && themePaths.base, theme, kind, primary);\n  // set the badge relative to the button content\n  // when the button doesn't have background or border\n  // (!kind && icon && !label) is necessary because for old button logic,\n  // if button has icon but not label, it will be considered \"plain\",\n  // so no border or background will be applied\n  var innerBadge = ((_theme$button2 = theme.button) == null || (_theme$button2 = _theme$button2.badge) == null ? void 0 : _theme$button2.align) !== 'container' && (!background && !border || !kind && icon && !label);\n  if (badgeProp && innerBadge) {\n    contents = /*#__PURE__*/React.createElement(Badge, {\n      content: badgeProp\n    }, contents);\n  }\n  if (busy || success) {\n    // match what the label will use\n    var animationColor;\n    if (kind) {\n      if (!plain) {\n        animationColor = hover && getIconColor(themePaths.hover, theme) || getIconColor(themePaths.base, theme, color, kind);\n      }\n    } else if (primary) {\n      animationColor = theme.global.colors.text[isDarkBackground() ? 'dark' : 'light'];\n    }\n    contents = /*#__PURE__*/\n    // position relative is necessary to have the animation\n    // display over the button content\n    React.createElement(RelativeBox, {\n      flex: false\n    }, busy && /*#__PURE__*/React.createElement(EllipsisAnimation, null), success && /*#__PURE__*/React.createElement(Box, {\n      style: {\n        position: 'absolute'\n      },\n      fill: true,\n      alignContent: \"center\",\n      justify: \"center\"\n    }, /*#__PURE__*/React.createElement(GrowCheckmark, {\n      color: animationColor,\n      \"aria-hidden\": true\n    })), /*#__PURE__*/React.createElement(StyledBusyContents, {\n      animating: busy || success\n    }, contents));\n  }\n  var styledButtonResult;\n  if (kind) {\n    styledButtonResult = /*#__PURE__*/React.createElement(StyledButtonKind, _extends({}, rest, {\n      as: domTag,\n      ref: ref,\n      active: active,\n      align: align,\n      \"aria-label\": ariaLabel || a11yTitle,\n      busy: busy,\n      badge: badgeProp,\n      colorValue: color,\n      disabled: disabled,\n      hasIcon: !!icon,\n      gap: gap,\n      hasLabel: !!label,\n      icon: icon,\n      fillContainer: fill,\n      focus: focus,\n      focusIndicator: focusIndicator,\n      href: href,\n      kind: kind,\n      themePaths: themePaths,\n      onClick: !busy && !success ? onClick : undefined,\n      onFocus: function onFocus(event) {\n        setFocus(true);\n        if (_onFocus) _onFocus(event);\n      },\n      onBlur: function onBlur(event) {\n        setFocus(false);\n        if (_onBlur) _onBlur(event);\n      },\n      onMouseOver: onMouseOverButton,\n      onMouseOut: onMouseOutButton,\n      pad: pad,\n      plain: plain || Children.count(children) > 0,\n      primary: primary,\n      sizeProp: size,\n      success: success,\n      type: !href ? type : undefined\n    }), contents);\n  } else {\n    styledButtonResult = /*#__PURE__*/React.createElement(StyledButton, _extends({}, rest, {\n      as: domTag,\n      ref: ref,\n      \"aria-label\": ariaLabel || a11yTitle,\n      busy: busy,\n      colorValue: color,\n      active: active,\n      selected: selected,\n      disabled: disabled,\n      hasIcon: !!icon,\n      gap: gap,\n      hasLabel: !!label,\n      fillContainer: fill,\n      focus: focus,\n      focusIndicator: focusIndicator,\n      href: href,\n      kind: kind,\n      themePaths: themePaths,\n      onClick: !busy && !success ? onClick : undefined,\n      onFocus: function onFocus(event) {\n        setFocus(true);\n        if (_onFocus) _onFocus(event);\n      },\n      onBlur: function onBlur(event) {\n        setFocus(false);\n        if (_onBlur) _onBlur(event);\n      },\n      onMouseOver: onMouseOverButton,\n      onMouseOut: onMouseOutButton,\n      pad: pad || !plain,\n      plain: typeof plain !== 'undefined' ? plain : Children.count(children) > 0 || icon && !label,\n      primary: primary,\n      sizeProp: size,\n      success: success,\n      type: !href ? type : undefined\n    }), contents);\n  }\n  if (tip) {\n    if (typeof tip === 'string') {\n      styledButtonResult = /*#__PURE__*/React.createElement(Tip, {\n        content: tip\n      }, styledButtonResult);\n    } else {\n      styledButtonResult = /*#__PURE__*/React.createElement(Tip, tip, styledButtonResult);\n    }\n  }\n\n  // if button has background or border, place badge relative\n  // to outer edge of button\n  if (badgeProp && !innerBadge) {\n    styledButtonResult = /*#__PURE__*/React.createElement(Badge, {\n      content: badgeProp\n    }, styledButtonResult);\n  }\n  return styledButtonResult;\n});\nButton.displayName = 'Button';\nButton.propTypes = ButtonPropTypes;\nexport { Button };","map":{"version":3,"names":["_excluded","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","cloneElement","Children","forwardRef","useContext","useMemo","useState","useCallback","useEffect","styled","ThemeContext","backgroundAndTextColors","colorIsDark","findButtonParent","useSizedIcon","normalizeBackground","normalizeColor","defaultProps","ButtonPropTypes","AnnounceContext","MessageContext","Box","Tip","Badge","StyledButton","StyledButtonKind","useAnalytics","Skeleton","useSkeleton","EllipsisAnimation","GrowCheckmark","StyledBusyContents","RelativeBox","withConfig","displayName","componentId","getIconColor","paths","theme","colorProp","kind","result","index","baseObj","button","obj","parts","split","shift","_obj","background","color","objColor","undefined","icon","props","_obj2","_parts","border","getKindIcon","_obj3","getPropertyColor","property","primary","Button","_ref","ref","_theme$button$kind","_theme$button2","active","_ref$align","align","ariaLabel","badgeProp","badge","busy","children","disabled","_ref$focusIndicator","focusIndicator","gap","fill","href","justify","kindArg","label","messages","_onBlur","onBlur","onClickProp","onClick","_onFocus","onFocus","onMouseOut","onMouseOver","pad","plain","reverseProp","reverse","secondary","selected","sizeProp","size","success","tip","_ref$type","type","_ref$a11yTitle","a11yTitle","as","rest","_useState","focus","setFocus","_useState2","hover","setHover","announce","_useContext","format","console","warn","id","skeleton","sendAnalytics","event","element","kindObj","themePaths","base","push","isDarkBackground","backgroundColor","global","colors","control","onMouseOverButton","onMouseOutButton","kindIcon","buttonIcon","iconColor","text","_iconColor","_theme$text","_theme$button$size","createElement","height","domTag","first","second","contents","_theme$button","direction","responsive","innerBadge","content","animationColor","flex","style","position","alignContent","animating","styledButtonResult","colorValue","hasIcon","hasLabel","fillContainer","count","propTypes"],"sources":["/Users/kyle/node_modules/grommet/es6/components/Button/Button.js"],"sourcesContent":["var _excluded = [\"active\", \"align\", \"aria-label\", \"badge\", \"busy\", \"color\", \"children\", \"disabled\", \"icon\", \"focusIndicator\", \"gap\", \"fill\", \"href\", \"justify\", \"kind\", \"label\", \"messages\", \"onBlur\", \"onClick\", \"onFocus\", \"onMouseOut\", \"onMouseOver\", \"pad\", \"plain\", \"primary\", \"reverse\", \"secondary\", \"selected\", \"size\", \"success\", \"tip\", \"type\", \"a11yTitle\", \"as\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React, { cloneElement, Children, forwardRef, useContext, useMemo, useState, useCallback, useEffect } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { backgroundAndTextColors, colorIsDark, findButtonParent, useSizedIcon, normalizeBackground, normalizeColor } from '../../utils';\nimport { defaultProps } from '../../default-props';\nimport { ButtonPropTypes } from './propTypes';\nimport { AnnounceContext } from '../../contexts/AnnounceContext';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { Box } from '../Box';\nimport { Tip } from '../Tip';\nimport { Badge } from './Badge';\nimport { StyledButton } from './StyledButton';\nimport { StyledButtonKind } from './StyledButtonKind';\nimport { useAnalytics } from '../../contexts/AnalyticsContext';\nimport { Skeleton, useSkeleton } from '../Skeleton';\nimport { EllipsisAnimation, GrowCheckmark, StyledBusyContents } from './BusyAnimation';\nvar RelativeBox = styled(Box).withConfig({\n  displayName: \"Button__RelativeBox\",\n  componentId: \"sc-zuqsuw-0\"\n})([\"position:relative;\"]);\n\n// We have two Styled* components to separate\n// the newer default|primary|secondary approach,\n// which we use the term \"kind\" to refer to,\n// from the previous approach. Hopefully, when we get to grommet v3,\n// we can drop the old way and just use kind.\n//\n// In the kind approach, we rely on the basic structure of the theme\n// being repeated. For example: button.default, button.active,\n// button.active.default all refer to a similar object containing\n// { background, border, color, padding }.\n// This allows us to use the same code to evaluate color and generate CSS.\n// We just need to build up CSS, since selectors override previous ones.\n// See StyledButtonKind.kindStyles() for this.\n// And we build down to determine icon color, once we have a color from\n// the latest applicable state, we can stop. See Button.getIconColor() for this.\n// backgroundAndTextColor() is used in both cases to ensure we are determining\n// color in the same way, so the icon and label align.\n\n// only when default is in the theme\n// Used to get the color for the icon to match what StyledButtonKind\n// and backgroundStyle() will do for the label.\n// The paths are ordered from basic to specific. Go through them\n// specific to base until we find one that has a color and use that.\nvar getIconColor = function getIconColor(paths, theme, colorProp, kind) {\n  if (paths === void 0) {\n    paths = [];\n  }\n  var result = [];\n  var index = paths.length - 1;\n  // caller has specified a themeObj to use for styling\n  // relevant for cases like pagination which looks to theme.pagination.button\n  if (typeof kind === 'object') index = 0;\n  // stop when we have a color or no more paths\n  while (index >= 0 && !result[1]) {\n    var baseObj = typeof kind === 'object' && kind || theme.button;\n    var obj = baseObj;\n    // find sub-object under the button theme that corresponds with this path\n    // for example: 'active.primary'\n    if (paths[index]) {\n      var parts = paths[index].split('.');\n      while (obj && parts.length) obj = obj[parts.shift()];\n    }\n    if (obj) {\n      var _obj;\n      // use passed in color for background if the theme has a background color\n      var background = colorProp && obj.background && obj.background.color ? colorProp : obj.background;\n\n      // if theme object explicitly sets the color to undefined, pass false\n      // to indicate that the theme doesn't want any text color\n      var objColor = obj.color || (Object.prototype.hasOwnProperty.call(obj, 'color') && obj.color === undefined ? false : undefined);\n      var color = void 0;\n      if ((_obj = obj) != null && (_obj = _obj.icon) != null && (_obj = _obj.props) != null && _obj.color) color = obj.icon.props.color;\n      // if no icon defined for this state, see if there is an icon\n      // with color defined at one higher level\n      else if (paths[index + 1]) {\n        var _obj2;\n        var _parts = paths[index + 1].split('.');\n        while (baseObj && _parts.length) obj = baseObj[_parts.shift()];\n        if ((_obj2 = obj) != null && (_obj2 = _obj2.icon) != null && (_obj2 = _obj2.props) != null && _obj2.color) color = obj.icon.props.color;\n      }\n      // use passed in color for text if the theme doesn't have\n      // background or border color\n      if (!color) color = colorProp && (!obj.background || !obj.background.color) && (!obj.border || !obj.border.color) ? colorProp : objColor;\n      result = backgroundAndTextColors(background, color, theme);\n    }\n    index -= 1;\n  }\n  return result[1] || undefined;\n};\n\n// get the icon for the current button state\nvar getKindIcon = function getKindIcon(paths, theme, kind) {\n  if (paths === void 0) {\n    paths = [];\n  }\n  var result;\n  var index = paths.length - 1;\n  // caller has specified a themeObj to use for styling\n  // relevant for cases like pagination which looks to theme.pagination.button\n  if (typeof kind === 'object') index = 0;\n  // stop when we have a color or no more paths\n  while (index >= 0 && !result) {\n    var _obj3;\n    var obj = typeof kind === 'object' && kind || theme.button;\n    // find sub-object under the button theme that corresponds with this path\n    // for example: 'active.primary'\n    if (paths[index]) {\n      var parts = paths[index].split('.');\n      while (obj && parts.length) obj = obj[parts.shift()];\n    }\n    if ((_obj3 = obj) != null && _obj3.icon) result = obj.icon;\n    index -= 1;\n  }\n  return result || undefined;\n};\nvar getPropertyColor = function getPropertyColor(property, paths, theme, kind, primary) {\n  if (paths === void 0) {\n    paths = [];\n  }\n  var result;\n  if (kind) {\n    var obj = typeof kind === 'object' && kind || theme.button;\n    // index 0 is default state\n    if (paths[0]) {\n      var parts = paths[0].split('.');\n      while (obj && parts.length) obj = obj[parts.shift()];\n    }\n    if (obj) {\n      result = obj[property] || obj[property] && obj[property].color;\n    }\n  } else if (primary && theme && theme.button && theme.button.primary) {\n    result = theme.button.primary[property] || theme.button.primary[property] && theme.button.primary[property].color;\n  } else {\n    result = theme && theme.button && theme.button[property] || theme && theme.button && theme.button[property] && theme.button[property].color;\n  }\n  return result;\n};\nvar Button = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _theme$button$kind, _theme$button2;\n  var active = _ref.active,\n    _ref$align = _ref.align,\n    align = _ref$align === void 0 ? 'center' : _ref$align,\n    ariaLabel = _ref['aria-label'],\n    badgeProp = _ref.badge,\n    busy = _ref.busy,\n    color = _ref.color,\n    children = _ref.children,\n    disabled = _ref.disabled,\n    icon = _ref.icon,\n    _ref$focusIndicator = _ref.focusIndicator,\n    focusIndicator = _ref$focusIndicator === void 0 ? true : _ref$focusIndicator,\n    gap = _ref.gap,\n    fill = _ref.fill,\n    href = _ref.href,\n    justify = _ref.justify,\n    kindArg = _ref.kind,\n    label = _ref.label,\n    messages = _ref.messages,\n    _onBlur = _ref.onBlur,\n    onClickProp = _ref.onClick,\n    _onFocus = _ref.onFocus,\n    onMouseOut = _ref.onMouseOut,\n    onMouseOver = _ref.onMouseOver,\n    pad = _ref.pad,\n    plain = _ref.plain,\n    primary = _ref.primary,\n    reverseProp = _ref.reverse,\n    secondary = _ref.secondary,\n    selected = _ref.selected,\n    sizeProp = _ref.size,\n    success = _ref.success,\n    tip = _ref.tip,\n    _ref$type = _ref.type,\n    type = _ref$type === void 0 ? 'button' : _ref$type,\n    _ref$a11yTitle = _ref.a11yTitle,\n    a11yTitle = _ref$a11yTitle === void 0 ? typeof tip === 'string' ? tip : undefined : _ref$a11yTitle,\n    as = _ref.as,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var _useState = useState(),\n    focus = _useState[0],\n    setFocus = _useState[1];\n  var _useState2 = useState(false),\n    hover = _useState2[0],\n    setHover = _useState2[1];\n  var announce = useContext(AnnounceContext);\n  var _useContext = useContext(MessageContext),\n    format = _useContext.format;\n  if (busy && success) {\n    console.warn('Button cannot have both busy and success set to true.');\n  }\n  useEffect(function () {\n    if (busy) announce(format({\n      id: 'button.busy',\n      messages: messages\n    }));else if (success) announce(format({\n      id: 'button.success',\n      messages: messages\n    }));\n  }, [announce, busy, format, messages, success]);\n  if ((icon || label) && children) {\n    console.warn('Button should not have children if icon or label is provided');\n  }\n  var skeleton = useSkeleton();\n  var sendAnalytics = useAnalytics();\n  var onClick = useCallback(function (event) {\n    sendAnalytics({\n      type: 'buttonClick',\n      element: findButtonParent(event.target),\n      event: event,\n      href: href,\n      label: typeof label === 'string' ? label : undefined\n    });\n    if (onClickProp) onClickProp(event);\n  }, [onClickProp, sendAnalytics, href, label]);\n\n  // kindArg is object if we are referencing a theme object\n  // outside of theme.button\n  var kindObj = useMemo(function () {\n    return typeof kindArg === 'object';\n  }, [kindArg]);\n\n  // if the theme has button.default, what kind of Button is this\n  var kind = useMemo(function () {\n    if (theme.button[\"default\"] || kindObj) {\n      if (kindArg) return kindArg;\n      if (primary) return 'primary';\n      if (secondary) return 'secondary';\n      return 'default';\n    }\n    return undefined; // pre-default, no kind\n  }, [kindArg, kindObj, primary, secondary, theme]);\n\n  // for backwards compatibility, no-kind button theme did not\n  // default to size \"medium\" on buttons with no size prop\n  var size = sizeProp || kind && 'medium' || undefined;\n  // When we have a kind and are not plain, themePaths stores the relative\n  // paths within the theme for the current kind and state of the button.\n  // These paths are used with getIconColor() above and kindStyle() within\n  // StyledButtonKind.\n  var themePaths = useMemo(function () {\n    if (!kind || plain) return undefined;\n    var result = {\n      base: [],\n      hover: []\n    };\n    if (!kindObj) result.base.push(kind);\n    if (selected) {\n      result.base.push('selected');\n      if (!kindObj) result.base.push(\"selected.\" + kind);\n    }\n    if (disabled) {\n      result.base.push('disabled');\n      if (!kindObj) result.base.push(\"disabled.\" + kind);\n    } else {\n      if (active) {\n        result.base.push('active');\n        if (!kindObj) result.base.push(\"active.\" + kind);\n      }\n      result.hover.push('hover');\n      if (!kindObj) result.hover.push(\"hover.\" + kind);\n      if (active) {\n        result.hover.push(\"hover.active\");\n        if (!kindObj) {\n          result.hover.push(\"hover.active.\" + kind);\n        }\n      }\n    }\n    return result;\n  }, [active, disabled, kind, kindObj, plain, selected]);\n\n  // only used when theme does not have button.default\n  var isDarkBackground = function isDarkBackground() {\n    var backgroundColor = normalizeBackground(normalizeColor(color || theme.button.primary && theme.button.primary.color || theme.global.colors.control || 'brand', theme), theme);\n    return colorIsDark(backgroundColor, theme);\n  };\n  var onMouseOverButton = function onMouseOverButton(event) {\n    setHover(true);\n    if (onMouseOver) {\n      onMouseOver(event);\n    }\n  };\n  var onMouseOutButton = function onMouseOutButton(event) {\n    setHover(false);\n    if (onMouseOut) {\n      onMouseOut(event);\n    }\n  };\n  var kindIcon = hover && getKindIcon(themePaths == null ? void 0 : themePaths.hover, theme, kind) || getKindIcon(themePaths == null ? void 0 : themePaths.base, theme, kind);\n  var buttonIcon = icon || kindIcon;\n  // only change color if user did not specify the color themselves...\n  if (icon && !icon.props.color) {\n    if (kind) {\n      if (!plain) {\n        // match what the label will use\n        var iconColor = hover && getIconColor(themePaths.hover, theme) || getIconColor(themePaths.base, theme, color, kind);\n        if (iconColor) buttonIcon = /*#__PURE__*/cloneElement(icon, {\n          color: iconColor\n        });\n      }\n    } else if (primary) {\n      buttonIcon = /*#__PURE__*/cloneElement(icon, {\n        color: theme.global.colors.text[isDarkBackground() ? 'dark' : 'light']\n      });\n    }\n  } else if (kindIcon && !plain) {\n    var _iconColor = hover && getIconColor(themePaths.hover, theme) || getIconColor(themePaths.base, theme, color, kind);\n    if (_iconColor) buttonIcon = /*#__PURE__*/cloneElement(kindIcon, {\n      color: _iconColor\n    });\n  }\n  buttonIcon = useSizedIcon(buttonIcon, size, theme);\n  if (skeleton) {\n    var _theme$text, _theme$button$size;\n    return /*#__PURE__*/React.createElement(Skeleton, _extends({\n      ref: ref,\n      height: ((_theme$text = theme.text[size || 'medium']) == null ? void 0 : _theme$text.height) || size,\n      a11yTitle: a11yTitle\n    }, rest, (_theme$button$size = theme.button.size) == null ? void 0 : _theme$button$size[size || 'medium'], theme.button.skeleton));\n  }\n  var reverse = reverseProp != null ? reverseProp : (_theme$button$kind = theme.button[kind]) == null ? void 0 : _theme$button$kind.reverse;\n  var domTag = !as && href ? 'a' : as;\n  var first = reverse ? label : buttonIcon;\n  var second = reverse ? buttonIcon : label;\n  var contents;\n  if (first && second) {\n    var _theme$button;\n    contents = /*#__PURE__*/React.createElement(Box, {\n      direction: ((_theme$button = theme.button) == null || (_theme$button = _theme$button[kind]) == null ? void 0 : _theme$button.direction) || 'row',\n      align: \"center\",\n      justify: justify || (align === 'center' ? 'center' : 'between'),\n      gap: gap || theme.button.gap,\n      responsive: false\n    }, first, second);\n  } else if (typeof children === 'function') {\n    contents = children({\n      disabled: disabled,\n      hover: hover,\n      focus: focus\n    });\n  } else {\n    contents = first || second || children;\n  }\n  var background = getPropertyColor('background', themePaths && themePaths.base, theme, kind, primary);\n  var border = getPropertyColor('border', themePaths && themePaths.base, theme, kind, primary);\n  // set the badge relative to the button content\n  // when the button doesn't have background or border\n  // (!kind && icon && !label) is necessary because for old button logic,\n  // if button has icon but not label, it will be considered \"plain\",\n  // so no border or background will be applied\n  var innerBadge = ((_theme$button2 = theme.button) == null || (_theme$button2 = _theme$button2.badge) == null ? void 0 : _theme$button2.align) !== 'container' && (!background && !border || !kind && icon && !label);\n  if (badgeProp && innerBadge) {\n    contents = /*#__PURE__*/React.createElement(Badge, {\n      content: badgeProp\n    }, contents);\n  }\n  if (busy || success) {\n    // match what the label will use\n    var animationColor;\n    if (kind) {\n      if (!plain) {\n        animationColor = hover && getIconColor(themePaths.hover, theme) || getIconColor(themePaths.base, theme, color, kind);\n      }\n    } else if (primary) {\n      animationColor = theme.global.colors.text[isDarkBackground() ? 'dark' : 'light'];\n    }\n    contents =\n    /*#__PURE__*/\n    // position relative is necessary to have the animation\n    // display over the button content\n    React.createElement(RelativeBox, {\n      flex: false\n    }, busy && /*#__PURE__*/React.createElement(EllipsisAnimation, null), success && /*#__PURE__*/React.createElement(Box, {\n      style: {\n        position: 'absolute'\n      },\n      fill: true,\n      alignContent: \"center\",\n      justify: \"center\"\n    }, /*#__PURE__*/React.createElement(GrowCheckmark, {\n      color: animationColor,\n      \"aria-hidden\": true\n    })), /*#__PURE__*/React.createElement(StyledBusyContents, {\n      animating: busy || success\n    }, contents));\n  }\n  var styledButtonResult;\n  if (kind) {\n    styledButtonResult = /*#__PURE__*/React.createElement(StyledButtonKind, _extends({}, rest, {\n      as: domTag,\n      ref: ref,\n      active: active,\n      align: align,\n      \"aria-label\": ariaLabel || a11yTitle,\n      busy: busy,\n      badge: badgeProp,\n      colorValue: color,\n      disabled: disabled,\n      hasIcon: !!icon,\n      gap: gap,\n      hasLabel: !!label,\n      icon: icon,\n      fillContainer: fill,\n      focus: focus,\n      focusIndicator: focusIndicator,\n      href: href,\n      kind: kind,\n      themePaths: themePaths,\n      onClick: !busy && !success ? onClick : undefined,\n      onFocus: function onFocus(event) {\n        setFocus(true);\n        if (_onFocus) _onFocus(event);\n      },\n      onBlur: function onBlur(event) {\n        setFocus(false);\n        if (_onBlur) _onBlur(event);\n      },\n      onMouseOver: onMouseOverButton,\n      onMouseOut: onMouseOutButton,\n      pad: pad,\n      plain: plain || Children.count(children) > 0,\n      primary: primary,\n      sizeProp: size,\n      success: success,\n      type: !href ? type : undefined\n    }), contents);\n  } else {\n    styledButtonResult = /*#__PURE__*/React.createElement(StyledButton, _extends({}, rest, {\n      as: domTag,\n      ref: ref,\n      \"aria-label\": ariaLabel || a11yTitle,\n      busy: busy,\n      colorValue: color,\n      active: active,\n      selected: selected,\n      disabled: disabled,\n      hasIcon: !!icon,\n      gap: gap,\n      hasLabel: !!label,\n      fillContainer: fill,\n      focus: focus,\n      focusIndicator: focusIndicator,\n      href: href,\n      kind: kind,\n      themePaths: themePaths,\n      onClick: !busy && !success ? onClick : undefined,\n      onFocus: function onFocus(event) {\n        setFocus(true);\n        if (_onFocus) _onFocus(event);\n      },\n      onBlur: function onBlur(event) {\n        setFocus(false);\n        if (_onBlur) _onBlur(event);\n      },\n      onMouseOver: onMouseOverButton,\n      onMouseOut: onMouseOutButton,\n      pad: pad || !plain,\n      plain: typeof plain !== 'undefined' ? plain : Children.count(children) > 0 || icon && !label,\n      primary: primary,\n      sizeProp: size,\n      success: success,\n      type: !href ? type : undefined\n    }), contents);\n  }\n  if (tip) {\n    if (typeof tip === 'string') {\n      styledButtonResult = /*#__PURE__*/React.createElement(Tip, {\n        content: tip\n      }, styledButtonResult);\n    } else {\n      styledButtonResult = /*#__PURE__*/React.createElement(Tip, tip, styledButtonResult);\n    }\n  }\n\n  // if button has background or border, place badge relative\n  // to outer edge of button\n  if (badgeProp && !innerBadge) {\n    styledButtonResult = /*#__PURE__*/React.createElement(Badge, {\n      content: badgeProp\n    }, styledButtonResult);\n  }\n  return styledButtonResult;\n});\nButton.displayName = 'Button';\nButton.propTypes = ButtonPropTypes;\nexport { Button };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}