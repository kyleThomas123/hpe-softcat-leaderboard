{"ast":null,"code":"function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { setFocusWithoutScroll } from '../../utils';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { CheckBox } from '../CheckBox';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { SelectionSummary } from './SelectionSummary';\nimport { StyledContainer, OptionsContainer, SelectOption } from '../Select/StyledSelect';\nimport { applyKey, getOptionLabel, getOptionValue, useDisabled, getOptionIndex, arrayIncludes } from '../Select/utils';\nimport { EmptySearchOption } from '../Select/EmptySearchOption';\nvar SelectMultipleContainer = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _optionsRef$current;\n  var allOptions = _ref.allOptions,\n    _ref$children = _ref.children,\n    children = _ref$children === void 0 ? null : _ref$children,\n    disabledProp = _ref.disabled,\n    disabledKey = _ref.disabledKey,\n    dropHeight = _ref.dropHeight,\n    _ref$emptySearchMessa = _ref.emptySearchMessage,\n    emptySearchMessage = _ref$emptySearchMessa === void 0 ? 'No matches found' : _ref$emptySearchMessa,\n    help = _ref.help,\n    icon = _ref.icon,\n    id = _ref.id,\n    labelKey = _ref.labelKey,\n    limit = _ref.limit,\n    onChange = _ref.onChange,\n    onClose = _ref.onClose,\n    onKeyDown = _ref.onKeyDown,\n    onMore = _ref.onMore,\n    onSearch = _ref.onSearch,\n    optionIndexesInValue = _ref.optionIndexesInValue,\n    options = _ref.options,\n    _ref$replace = _ref.replace,\n    replace = _ref$replace === void 0 ? true : _ref$replace,\n    searchPlaceholder = _ref.searchPlaceholder,\n    search = _ref.search,\n    setSearch = _ref.setSearch,\n    usingKeyboard = _ref.usingKeyboard,\n    _ref$value = _ref.value,\n    value = _ref$value === void 0 ? [] : _ref$value,\n    valueKey = _ref.valueKey,\n    showSelectedInline = _ref.showSelectedInline;\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var _useState = useState(-1),\n    activeIndex = _useState[0],\n    setActiveIndex = _useState[1];\n  var _useState2 = useState(usingKeyboard),\n    keyboardNavigation = _useState2[0],\n    setKeyboardNavigation = _useState2[1];\n  var searchRef = useRef();\n  var optionsRef = useRef();\n  var _useState3 = useState(disabledProp),\n    disabled = _useState3[0],\n    setDisabled = _useState3[1];\n  var activeRef = useRef();\n  var _useState4 = useState(),\n    showA11yLimit = _useState4[0],\n    setShowA11yLimit = _useState4[1];\n  var clearRef = useRef();\n  var isDisabled = useDisabled(disabled, disabledKey, options, valueKey || labelKey);\n\n  // for keyboard/screenreader, keep the active option in focus\n  useEffect(function () {\n    var _activeRef$current;\n    if (activeIndex) (_activeRef$current = activeRef.current) == null || _activeRef$current.focus();\n  }, [activeIndex]);\n\n  // set initial focus\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var clearButton = clearRef.current;\n      if (clearButton && clearButton.focus) {\n        setFocusWithoutScroll(clearButton);\n      } else if (searchRef && searchRef.current) {\n        var searchInput = searchRef.current;\n        if (searchInput && searchInput.focus) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (activeRef.current) {\n        setFocusWithoutScroll(activeRef.current);\n      } else if (optionsRef.current) {\n        setActiveIndex(0);\n      }\n    }, 100); // Drop should be open after 100ms\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, []);\n  useEffect(function () {\n    var optionsNode = optionsRef.current;\n    if (optionsNode != null && optionsNode.children) {\n      var optionNode = optionsNode.children[activeIndex];\n      if (optionNode) optionNode.focus();\n    }\n  }, [activeIndex]);\n  var isSelected = useCallback(function (index) {\n    var result;\n    var optionVal = getOptionValue(index, options, valueKey || labelKey);\n    if (value) {\n      if (value.length === 0) {\n        result = false;\n      } else if (typeof value[0] !== 'object') {\n        result = value.indexOf(optionVal) !== -1;\n      } else if (valueKey) {\n        result = value.some(function (valueItem) {\n          var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey];\n          return valueValue === optionVal;\n        });\n      }\n    }\n    return result;\n  }, [value, valueKey, options, labelKey]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n        var allOptionsIndex = getOptionIndex(allOptions, options[index], valueKey || labelKey);\n        var valueIndex = optionIndexesInValue.indexOf(allOptionsIndex);\n        if (valueIndex === -1 && (!limit || (value == null ? void 0 : value.length) < limit)) {\n          nextOptionIndexesInValue.push(allOptionsIndex);\n        } else {\n          nextOptionIndexesInValue.splice(valueIndex, 1);\n        }\n        var nextValue = nextOptionIndexesInValue.map(function (i) {\n          return valueKey && valueKey.reduce ? applyKey(allOptions[i], valueKey) : allOptions[i];\n        });\n        var nextSelected = nextOptionIndexesInValue;\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [labelKey, limit, onChange, optionIndexesInValue, options, allOptions, valueKey, value]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n    if (nextActiveIndex !== (options == null ? void 0 : options.length)) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, options]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n    if (nextActiveIndex === -1) {\n      var searchInput = searchRef.current;\n      if (searchInput && searchInput.focus) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(searchInput);\n      }\n    }\n    if (nextActiveIndex >= 0) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex]);\n  var onKeyDownOption = useCallback(function (event) {\n    if (!onSearch) {\n      var nextActiveIndex = options.findIndex(function (e) {\n        var label;\n        if (typeof e === 'object') {\n          label = e.label || applyKey(e, labelKey);\n        } else {\n          label = e;\n        }\n        return typeof label === 'string' && label.charAt(0).toLowerCase() === event.key.toLowerCase();\n      });\n      if (nextActiveIndex >= 0) {\n        event.preventDefault();\n        setActiveIndex(nextActiveIndex);\n        setKeyboardNavigation(true);\n      }\n    }\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [onKeyDown, options, onSearch, labelKey]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if (!isDisabled(activeIndex) && activeIndex >= 0 && activeIndex < (options == null ? void 0 : options.length)) {\n      event.preventDefault(); // prevent submitting forms\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption, options, isDisabled]);\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n\n  // handle when limit is reached\n  useEffect(function () {\n    var originallyDisabled = function originallyDisabled(index) {\n      var option = allOptions[index];\n      var result;\n      if (disabledKey) {\n        result = applyKey(option, disabledKey);\n      } else if (Array.isArray(disabledProp)) {\n        if (typeof disabledProp[0] === 'number') {\n          result = disabledProp.indexOf(index) !== -1;\n        } else {\n          result = getOptionIndex(disabledProp, getOptionValue(index, options, valueKey || labelKey), valueKey || labelKey) !== -1;\n        }\n      }\n      return result;\n    };\n    if (value && limit) {\n      if (value.length === limit) {\n        var newDisabled = [].concat(disabledProp);\n        // disable everything that is not selected\n        for (var i = 0; i < (options == null ? void 0 : options.length); i += 1) {\n          if (!isSelected(i) && !originallyDisabled(i)) {\n            newDisabled.push(options[i]);\n          }\n        }\n        if (usingKeyboard) setShowA11yLimit('Selected. Maximum selection limit reached.');\n        setDisabled(newDisabled);\n      } else {\n        if (usingKeyboard) setShowA11yLimit(undefined);\n        setDisabled(disabledProp);\n      }\n    }\n  }, [isSelected, value, limit, disabledProp, allOptions, disabledKey, labelKey, options, usingKeyboard, valueKey]);\n\n  // reset showA11yLimit after announcement is read\n  useEffect(function () {\n    if (showA11yLimit !== undefined) {\n      setTimeout(function () {\n        setShowA11yLimit(undefined);\n      }, 2000); // value chosen based on length of a11yLimit message\n    }\n  }, [showA11yLimit]);\n  var summaryContent = /*#__PURE__*/React.createElement(SelectionSummary, {\n    allOptions: allOptions,\n    clearRef: clearRef,\n    disabled: disabled,\n    disabledKey: disabledKey,\n    isSelected: isSelected,\n    labelKey: labelKey,\n    limit: limit,\n    onChange: onChange,\n    onMore: onMore,\n    options: options,\n    search: search,\n    setActiveIndex: setActiveIndex,\n    showSelectedInline: showSelectedInline,\n    value: value,\n    valueKey: valueKey\n  });\n  var helpContent;\n  if (help) {\n    if (typeof help === 'string') helpContent = /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      pad: \"xsmall\"\n    }, /*#__PURE__*/React.createElement(Text, {\n      size: \"small\"\n    }, help));else helpContent = /*#__PURE__*/React.createElement(Box, {\n      flex: false\n    }, help);\n  }\n  if (showSelectedInline) summaryContent = /*#__PURE__*/React.createElement(Box, {\n    direction: \"row\",\n    justify: \"between\",\n    flex: false\n  }, summaryContent, /*#__PURE__*/React.createElement(Box, null, /*#__PURE__*/React.createElement(Button, {\n    fill: \"vertical\",\n    onClick: onClose,\n    a11yTitle: \"Close Select\"\n  }, icon)));\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onSpace: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDownOption,\n    onEsc: onClose\n  }, /*#__PURE__*/React.createElement(StyledContainer, {\n    ref: ref,\n    as: Box,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight,\n    a11yTitle: \"Select dropdown\"\n  }, summaryContent, onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? 'xsmall' : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: function onEnter(event) {\n      onNextOption(event);\n    }\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    a11yTitle: \"Search to filter options.\",\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    }\n  }))), helpContent, (options == null ? void 0 : options.length) > 0 ? /*#__PURE__*/React.createElement(OptionsContainer, {\n    role: \"listbox\",\n    tabIndex: \"0\",\n    ref: optionsRef,\n    \"aria-multiselectable\": true,\n    onMouseMove: function onMouseMove() {\n      return setKeyboardNavigation(false);\n    },\n    \"aria-activedescendant\": optionsRef == null || (_optionsRef$current = optionsRef.current) == null ? void 0 : _optionsRef$current.children[activeIndex]\n  }, /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = value ? arrayIncludes(value, valueKey && valueKey.reduce ? applyKey(option, valueKey) : option, valueKey || labelKey) : false;\n    var optionActive = activeIndex === index;\n    var optionLabel = getOptionLabel(index, options, labelKey || valueKey);\n\n    // Determine whether the label is done as a child or\n    // as an option Button kind property.\n    var child;\n    var textComponent = false;\n    if (children) {\n      child = children(option, index, options, {\n        active: optionActive,\n        disabled: optionDisabled,\n        selected: optionSelected\n      });\n      if (typeof child === 'string' || child.props && child.props.children && typeof child.props.children === 'string') textComponent = true;\n    } else {\n      child = /*#__PURE__*/React.createElement(CheckBox, {\n        label: /*#__PURE__*/React.createElement(Box, {\n          alignSelf: \"center\",\n          width: \"100%\",\n          align: \"start\"\n        }, optionLabel),\n        pad: \"xsmall\",\n        tabIndex: \"-1\",\n        checked: optionSelected,\n        disabled: optionDisabled\n      });\n    }\n    if (!children && search) {\n      var searchText = search.toLowerCase();\n      if (typeof optionLabel === 'string' && optionLabel.toLowerCase().indexOf(searchText) >= 0) {\n        // code to bold search term in matching options\n        var boldIndex = optionLabel.toLowerCase().indexOf(searchText);\n        var childBeginning = optionLabel.substring(0, boldIndex);\n        var childBold = optionLabel.substring(boldIndex, boldIndex + searchText.length);\n        childBold = /*#__PURE__*/React.createElement(\"b\", null, childBold);\n        var childEnd = optionLabel.substring(boldIndex + searchText.length);\n        child = /*#__PURE__*/React.createElement(CheckBox, {\n          label: /*#__PURE__*/React.createElement(Box, {\n            alignSelf: \"center\",\n            width: \"100%\",\n            align: \"start\",\n            direction: \"row\"\n          }, /*#__PURE__*/React.createElement(Text, null, childBeginning, childBold, childEnd)),\n          pad: \"xsmall\",\n          tabIndex: \"-1\",\n          checked: optionSelected,\n          disabled: optionDisabled\n        });\n      }\n    }\n\n    // if we have a child, turn on plain, and hoverIndicator\n    return /*#__PURE__*/React.createElement(SelectOption, {\n      a11yTitle: optionSelected ? optionLabel + \" selected\" : optionLabel + \" not selected\"\n      // eslint-disable-next-line react/no-array-index-key\n      ,\n\n      key: index\n      // merge optionRef and activeRef\n      ,\n\n      ref: function ref(node) {\n        // eslint-disable-next-line no-param-reassign\n        if (optionRef) optionRef.current = node;\n        if (optionActive) activeRef.current = node;\n      },\n      tabIndex: optionSelected ? '0' : '-1',\n      role: \"option\",\n      id: \"option\" + index,\n      \"aria-setsize\": options.length,\n      \"aria-posinset\": index + 1,\n      \"aria-selected\": optionSelected,\n      focusIndicator: false,\n      \"aria-disabled\": optionDisabled || undefined,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      active: optionActive,\n      selected: optionSelected,\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined,\n      onFocus: function onFocus() {\n        return setActiveIndex(index);\n      },\n      textComponent: textComponent\n    }, child);\n  })) : /*#__PURE__*/React.createElement(EmptySearchOption, {\n    emptySearchMessage: emptySearchMessage,\n    selectOptionsStyle: selectOptionsStyle,\n    theme: theme\n  }), usingKeyboard && showA11yLimit && /*#__PURE__*/React.createElement(Box, {\n    height: \"0px\",\n    width: \"0px\",\n    overflow: \"hidden\"\n    // announce when we reach the limit of items\n    // that can be selected\n    ,\n\n    \"aria-live\": \"assertive\",\n    role: \"alert\"\n  }, showA11yLimit)));\n});\nexport { SelectMultipleContainer };","map":{"version":3,"names":["_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","React","forwardRef","useCallback","useContext","useEffect","useRef","useState","ThemeContext","setFocusWithoutScroll","defaultProps","Box","Button","CheckBox","InfiniteScroll","Keyboard","Text","TextInput","SelectionSummary","StyledContainer","OptionsContainer","SelectOption","applyKey","getOptionLabel","getOptionValue","useDisabled","getOptionIndex","arrayIncludes","EmptySearchOption","SelectMultipleContainer","_ref","ref","_optionsRef$current","allOptions","_ref$children","children","disabledProp","disabled","disabledKey","dropHeight","_ref$emptySearchMessa","emptySearchMessage","help","icon","id","labelKey","limit","onChange","onClose","onKeyDown","onMore","onSearch","optionIndexesInValue","options","_ref$replace","replace","searchPlaceholder","search","setSearch","usingKeyboard","_ref$value","value","valueKey","showSelectedInline","theme","_useState","activeIndex","setActiveIndex","_useState2","keyboardNavigation","setKeyboardNavigation","searchRef","optionsRef","_useState3","setDisabled","activeRef","_useState4","showA11yLimit","setShowA11yLimit","clearRef","isDisabled","_activeRef$current","current","focus","timer","setTimeout","clearButton","searchInput","clearTimeout","optionsNode","optionNode","isSelected","index","result","optionVal","indexOf","some","valueItem","valueValue","selectOption","event","nextOptionIndexesInValue","slice","allOptionsIndex","valueIndex","push","splice","nextValue","map","reduce","nextSelected","option","selected","onNextOption","preventDefault","nextActiveIndex","onPreviousOption","onKeyDownOption","findIndex","e","label","charAt","toLowerCase","onActiveOption","onSelectOption","customSearchInput","select","SelectTextInput","selectOptionsStyle","box","container","originallyDisabled","Array","isArray","newDisabled","concat","undefined","summaryContent","createElement","helpContent","flex","pad","size","direction","justify","fill","onClick","a11yTitle","onEnter","onSpace","onUp","onDown","onEsc","as","focusIndicator","type","placeholder","nextSearch","role","tabIndex","onMouseMove","items","step","show","optionRef","optionDisabled","optionSelected","optionActive","optionLabel","child","textComponent","active","props","alignSelf","width","align","checked","searchText","boldIndex","childBeginning","substring","childBold","childEnd","node","plain","kind","onMouseOver","onFocus","height","overflow"],"sources":["/Users/kyle/projects/personal/hpe-react-practice/node_modules/grommet/es6/components/SelectMultiple/SelectMultipleContainer.js"],"sourcesContent":["function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { setFocusWithoutScroll } from '../../utils';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { CheckBox } from '../CheckBox';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { SelectionSummary } from './SelectionSummary';\nimport { StyledContainer, OptionsContainer, SelectOption } from '../Select/StyledSelect';\nimport { applyKey, getOptionLabel, getOptionValue, useDisabled, getOptionIndex, arrayIncludes } from '../Select/utils';\nimport { EmptySearchOption } from '../Select/EmptySearchOption';\nvar SelectMultipleContainer = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _optionsRef$current;\n  var allOptions = _ref.allOptions,\n    _ref$children = _ref.children,\n    children = _ref$children === void 0 ? null : _ref$children,\n    disabledProp = _ref.disabled,\n    disabledKey = _ref.disabledKey,\n    dropHeight = _ref.dropHeight,\n    _ref$emptySearchMessa = _ref.emptySearchMessage,\n    emptySearchMessage = _ref$emptySearchMessa === void 0 ? 'No matches found' : _ref$emptySearchMessa,\n    help = _ref.help,\n    icon = _ref.icon,\n    id = _ref.id,\n    labelKey = _ref.labelKey,\n    limit = _ref.limit,\n    onChange = _ref.onChange,\n    onClose = _ref.onClose,\n    onKeyDown = _ref.onKeyDown,\n    onMore = _ref.onMore,\n    onSearch = _ref.onSearch,\n    optionIndexesInValue = _ref.optionIndexesInValue,\n    options = _ref.options,\n    _ref$replace = _ref.replace,\n    replace = _ref$replace === void 0 ? true : _ref$replace,\n    searchPlaceholder = _ref.searchPlaceholder,\n    search = _ref.search,\n    setSearch = _ref.setSearch,\n    usingKeyboard = _ref.usingKeyboard,\n    _ref$value = _ref.value,\n    value = _ref$value === void 0 ? [] : _ref$value,\n    valueKey = _ref.valueKey,\n    showSelectedInline = _ref.showSelectedInline;\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var _useState = useState(-1),\n    activeIndex = _useState[0],\n    setActiveIndex = _useState[1];\n  var _useState2 = useState(usingKeyboard),\n    keyboardNavigation = _useState2[0],\n    setKeyboardNavigation = _useState2[1];\n  var searchRef = useRef();\n  var optionsRef = useRef();\n  var _useState3 = useState(disabledProp),\n    disabled = _useState3[0],\n    setDisabled = _useState3[1];\n  var activeRef = useRef();\n  var _useState4 = useState(),\n    showA11yLimit = _useState4[0],\n    setShowA11yLimit = _useState4[1];\n  var clearRef = useRef();\n  var isDisabled = useDisabled(disabled, disabledKey, options, valueKey || labelKey);\n\n  // for keyboard/screenreader, keep the active option in focus\n  useEffect(function () {\n    var _activeRef$current;\n    if (activeIndex) (_activeRef$current = activeRef.current) == null || _activeRef$current.focus();\n  }, [activeIndex]);\n\n  // set initial focus\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var clearButton = clearRef.current;\n      if (clearButton && clearButton.focus) {\n        setFocusWithoutScroll(clearButton);\n      } else if (searchRef && searchRef.current) {\n        var searchInput = searchRef.current;\n        if (searchInput && searchInput.focus) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (activeRef.current) {\n        setFocusWithoutScroll(activeRef.current);\n      } else if (optionsRef.current) {\n        setActiveIndex(0);\n      }\n    }, 100); // Drop should be open after 100ms\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, []);\n  useEffect(function () {\n    var optionsNode = optionsRef.current;\n    if (optionsNode != null && optionsNode.children) {\n      var optionNode = optionsNode.children[activeIndex];\n      if (optionNode) optionNode.focus();\n    }\n  }, [activeIndex]);\n  var isSelected = useCallback(function (index) {\n    var result;\n    var optionVal = getOptionValue(index, options, valueKey || labelKey);\n    if (value) {\n      if (value.length === 0) {\n        result = false;\n      } else if (typeof value[0] !== 'object') {\n        result = value.indexOf(optionVal) !== -1;\n      } else if (valueKey) {\n        result = value.some(function (valueItem) {\n          var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey];\n          return valueValue === optionVal;\n        });\n      }\n    }\n    return result;\n  }, [value, valueKey, options, labelKey]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n        var allOptionsIndex = getOptionIndex(allOptions, options[index], valueKey || labelKey);\n        var valueIndex = optionIndexesInValue.indexOf(allOptionsIndex);\n        if (valueIndex === -1 && (!limit || (value == null ? void 0 : value.length) < limit)) {\n          nextOptionIndexesInValue.push(allOptionsIndex);\n        } else {\n          nextOptionIndexesInValue.splice(valueIndex, 1);\n        }\n        var nextValue = nextOptionIndexesInValue.map(function (i) {\n          return valueKey && valueKey.reduce ? applyKey(allOptions[i], valueKey) : allOptions[i];\n        });\n        var nextSelected = nextOptionIndexesInValue;\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [labelKey, limit, onChange, optionIndexesInValue, options, allOptions, valueKey, value]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n    if (nextActiveIndex !== (options == null ? void 0 : options.length)) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, options]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n    if (nextActiveIndex === -1) {\n      var searchInput = searchRef.current;\n      if (searchInput && searchInput.focus) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(searchInput);\n      }\n    }\n    if (nextActiveIndex >= 0) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex]);\n  var onKeyDownOption = useCallback(function (event) {\n    if (!onSearch) {\n      var nextActiveIndex = options.findIndex(function (e) {\n        var label;\n        if (typeof e === 'object') {\n          label = e.label || applyKey(e, labelKey);\n        } else {\n          label = e;\n        }\n        return typeof label === 'string' && label.charAt(0).toLowerCase() === event.key.toLowerCase();\n      });\n      if (nextActiveIndex >= 0) {\n        event.preventDefault();\n        setActiveIndex(nextActiveIndex);\n        setKeyboardNavigation(true);\n      }\n    }\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [onKeyDown, options, onSearch, labelKey]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if (!isDisabled(activeIndex) && activeIndex >= 0 && activeIndex < (options == null ? void 0 : options.length)) {\n      event.preventDefault(); // prevent submitting forms\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption, options, isDisabled]);\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n\n  // handle when limit is reached\n  useEffect(function () {\n    var originallyDisabled = function originallyDisabled(index) {\n      var option = allOptions[index];\n      var result;\n      if (disabledKey) {\n        result = applyKey(option, disabledKey);\n      } else if (Array.isArray(disabledProp)) {\n        if (typeof disabledProp[0] === 'number') {\n          result = disabledProp.indexOf(index) !== -1;\n        } else {\n          result = getOptionIndex(disabledProp, getOptionValue(index, options, valueKey || labelKey), valueKey || labelKey) !== -1;\n        }\n      }\n      return result;\n    };\n    if (value && limit) {\n      if (value.length === limit) {\n        var newDisabled = [].concat(disabledProp);\n        // disable everything that is not selected\n        for (var i = 0; i < (options == null ? void 0 : options.length); i += 1) {\n          if (!isSelected(i) && !originallyDisabled(i)) {\n            newDisabled.push(options[i]);\n          }\n        }\n        if (usingKeyboard) setShowA11yLimit('Selected. Maximum selection limit reached.');\n        setDisabled(newDisabled);\n      } else {\n        if (usingKeyboard) setShowA11yLimit(undefined);\n        setDisabled(disabledProp);\n      }\n    }\n  }, [isSelected, value, limit, disabledProp, allOptions, disabledKey, labelKey, options, usingKeyboard, valueKey]);\n\n  // reset showA11yLimit after announcement is read\n  useEffect(function () {\n    if (showA11yLimit !== undefined) {\n      setTimeout(function () {\n        setShowA11yLimit(undefined);\n      }, 2000); // value chosen based on length of a11yLimit message\n    }\n  }, [showA11yLimit]);\n  var summaryContent = /*#__PURE__*/React.createElement(SelectionSummary, {\n    allOptions: allOptions,\n    clearRef: clearRef,\n    disabled: disabled,\n    disabledKey: disabledKey,\n    isSelected: isSelected,\n    labelKey: labelKey,\n    limit: limit,\n    onChange: onChange,\n    onMore: onMore,\n    options: options,\n    search: search,\n    setActiveIndex: setActiveIndex,\n    showSelectedInline: showSelectedInline,\n    value: value,\n    valueKey: valueKey\n  });\n  var helpContent;\n  if (help) {\n    if (typeof help === 'string') helpContent = /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      pad: \"xsmall\"\n    }, /*#__PURE__*/React.createElement(Text, {\n      size: \"small\"\n    }, help));else helpContent = /*#__PURE__*/React.createElement(Box, {\n      flex: false\n    }, help);\n  }\n  if (showSelectedInline) summaryContent = /*#__PURE__*/React.createElement(Box, {\n    direction: \"row\",\n    justify: \"between\",\n    flex: false\n  }, summaryContent, /*#__PURE__*/React.createElement(Box, null, /*#__PURE__*/React.createElement(Button, {\n    fill: \"vertical\",\n    onClick: onClose,\n    a11yTitle: \"Close Select\"\n  }, icon)));\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onSpace: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDownOption,\n    onEsc: onClose\n  }, /*#__PURE__*/React.createElement(StyledContainer, {\n    ref: ref,\n    as: Box,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight,\n    a11yTitle: \"Select dropdown\"\n  }, summaryContent, onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? 'xsmall' : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: function onEnter(event) {\n      onNextOption(event);\n    }\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    a11yTitle: \"Search to filter options.\",\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    }\n  }))), helpContent, (options == null ? void 0 : options.length) > 0 ? /*#__PURE__*/React.createElement(OptionsContainer, {\n    role: \"listbox\",\n    tabIndex: \"0\",\n    ref: optionsRef,\n    \"aria-multiselectable\": true,\n    onMouseMove: function onMouseMove() {\n      return setKeyboardNavigation(false);\n    },\n    \"aria-activedescendant\": optionsRef == null || (_optionsRef$current = optionsRef.current) == null ? void 0 : _optionsRef$current.children[activeIndex]\n  }, /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = value ? arrayIncludes(value, valueKey && valueKey.reduce ? applyKey(option, valueKey) : option, valueKey || labelKey) : false;\n    var optionActive = activeIndex === index;\n    var optionLabel = getOptionLabel(index, options, labelKey || valueKey);\n\n    // Determine whether the label is done as a child or\n    // as an option Button kind property.\n    var child;\n    var textComponent = false;\n    if (children) {\n      child = children(option, index, options, {\n        active: optionActive,\n        disabled: optionDisabled,\n        selected: optionSelected\n      });\n      if (typeof child === 'string' || child.props && child.props.children && typeof child.props.children === 'string') textComponent = true;\n    } else {\n      child = /*#__PURE__*/React.createElement(CheckBox, {\n        label: /*#__PURE__*/React.createElement(Box, {\n          alignSelf: \"center\",\n          width: \"100%\",\n          align: \"start\"\n        }, optionLabel),\n        pad: \"xsmall\",\n        tabIndex: \"-1\",\n        checked: optionSelected,\n        disabled: optionDisabled\n      });\n    }\n    if (!children && search) {\n      var searchText = search.toLowerCase();\n      if (typeof optionLabel === 'string' && optionLabel.toLowerCase().indexOf(searchText) >= 0) {\n        // code to bold search term in matching options\n        var boldIndex = optionLabel.toLowerCase().indexOf(searchText);\n        var childBeginning = optionLabel.substring(0, boldIndex);\n        var childBold = optionLabel.substring(boldIndex, boldIndex + searchText.length);\n        childBold = /*#__PURE__*/React.createElement(\"b\", null, childBold);\n        var childEnd = optionLabel.substring(boldIndex + searchText.length);\n        child = /*#__PURE__*/React.createElement(CheckBox, {\n          label: /*#__PURE__*/React.createElement(Box, {\n            alignSelf: \"center\",\n            width: \"100%\",\n            align: \"start\",\n            direction: \"row\"\n          }, /*#__PURE__*/React.createElement(Text, null, childBeginning, childBold, childEnd)),\n          pad: \"xsmall\",\n          tabIndex: \"-1\",\n          checked: optionSelected,\n          disabled: optionDisabled\n        });\n      }\n    }\n\n    // if we have a child, turn on plain, and hoverIndicator\n    return /*#__PURE__*/React.createElement(SelectOption, {\n      a11yTitle: optionSelected ? optionLabel + \" selected\" : optionLabel + \" not selected\"\n      // eslint-disable-next-line react/no-array-index-key\n      ,\n      key: index\n      // merge optionRef and activeRef\n      ,\n      ref: function ref(node) {\n        // eslint-disable-next-line no-param-reassign\n        if (optionRef) optionRef.current = node;\n        if (optionActive) activeRef.current = node;\n      },\n      tabIndex: optionSelected ? '0' : '-1',\n      role: \"option\",\n      id: \"option\" + index,\n      \"aria-setsize\": options.length,\n      \"aria-posinset\": index + 1,\n      \"aria-selected\": optionSelected,\n      focusIndicator: false,\n      \"aria-disabled\": optionDisabled || undefined,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      active: optionActive,\n      selected: optionSelected,\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined,\n      onFocus: function onFocus() {\n        return setActiveIndex(index);\n      },\n      textComponent: textComponent\n    }, child);\n  })) : /*#__PURE__*/React.createElement(EmptySearchOption, {\n    emptySearchMessage: emptySearchMessage,\n    selectOptionsStyle: selectOptionsStyle,\n    theme: theme\n  }), usingKeyboard && showA11yLimit && /*#__PURE__*/React.createElement(Box, {\n    height: \"0px\",\n    width: \"0px\",\n    overflow: \"hidden\"\n    // announce when we reach the limit of items\n    // that can be selected\n    ,\n    \"aria-live\": \"assertive\",\n    role: \"alert\"\n  }, showA11yLimit)));\n});\nexport { SelectMultipleContainer };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}