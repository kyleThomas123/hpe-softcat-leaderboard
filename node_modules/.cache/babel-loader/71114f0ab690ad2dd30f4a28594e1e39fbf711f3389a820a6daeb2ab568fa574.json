{"ast":null,"code":"function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nimport React, { forwardRef, useContext, useEffect, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { getNewContainer } from '../../utils';\nimport { LayerContainer } from './LayerContainer';\nimport { animationDuration } from './StyledLayer';\nimport { ContainerTargetContext } from '../../contexts/ContainerTargetContext';\nimport { LayerPropTypes } from './propTypes';\nvar Layer = /*#__PURE__*/forwardRef(function (props, ref) {\n  var animate = props.animate,\n    animation = props.animation,\n    targetChildPosition = props.targetChildPosition;\n  var _useState = useState(),\n    originalFocusedElement = _useState[0],\n    setOriginalFocusedElement = _useState[1];\n  useEffect(function () {\n    return setOriginalFocusedElement(document.activeElement);\n  }, []);\n  var _useState2 = useState(),\n    layerContainer = _useState2[0],\n    setLayerContainer = _useState2[1];\n  var containerTarget = useContext(ContainerTargetContext);\n  useEffect(function () {\n    return setLayerContainer(getNewContainer(containerTarget, targetChildPosition));\n  }, [containerTarget, targetChildPosition]);\n\n  // just a few things to clean up when the Layer is unmounted\n  useLayoutEffect(function () {\n    return function () {\n      if (originalFocusedElement) {\n        if (originalFocusedElement.focus) {\n          // wait for the fixed positioning to come back to normal\n          // see layer styling for reference\n          setTimeout(function () {\n            return originalFocusedElement.focus();\n          }, 0);\n        } else if (originalFocusedElement.parentNode && originalFocusedElement.parentNode.focus) {\n          // required for IE11 and Edge\n          originalFocusedElement.parentNode.focus();\n        }\n      }\n      if (layerContainer) {\n        var activeAnimation = animation !== undefined ? animation : animate;\n        if (activeAnimation !== false) {\n          // undefined uses 'slide' as the default\n          // animate out and remove later\n          var layerClone = layerContainer.cloneNode(true);\n          layerClone.id = 'layerClone';\n          containerTarget.appendChild(layerClone);\n          var clonedContainer = layerClone.querySelector('[class*=\"StyledLayer__StyledContainer\"]');\n          if (clonedContainer && clonedContainer.style) {\n            clonedContainer.style.animationDirection = 'reverse';\n          }\n          setTimeout(function () {\n            // we add the id and query here so the unit tests work\n            var clone = containerTarget.getRootNode().getElementById('layerClone');\n            if (clone) {\n              if (containerTarget.contains(clone)) {\n                containerTarget.removeChild(clone);\n              }\n              layerContainer.remove();\n            }\n          }, animationDuration);\n        } else if (containerTarget.contains(layerContainer)) {\n          containerTarget.removeChild(layerContainer);\n        }\n      }\n    };\n  }, [animate, animation, containerTarget, layerContainer, originalFocusedElement]);\n  return layerContainer ? /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(LayerContainer, _extends({\n    ref: ref\n  }, props)), layerContainer) : null;\n});\nLayer.displayName = 'Layer';\nLayer.propTypes = LayerPropTypes;\nexport { Layer };","map":{"version":3,"names":["_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","React","forwardRef","useContext","useEffect","useState","createPortal","useLayoutEffect","getNewContainer","LayerContainer","animationDuration","ContainerTargetContext","LayerPropTypes","Layer","props","ref","animate","animation","targetChildPosition","_useState","originalFocusedElement","setOriginalFocusedElement","document","activeElement","_useState2","layerContainer","setLayerContainer","containerTarget","focus","setTimeout","parentNode","activeAnimation","undefined","layerClone","cloneNode","id","appendChild","clonedContainer","querySelector","style","animationDirection","clone","getRootNode","getElementById","contains","removeChild","remove","createElement","displayName","propTypes"],"sources":["/Users/kyle/node_modules/grommet/es6/components/Layer/Layer.js"],"sourcesContent":["function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport React, { forwardRef, useContext, useEffect, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { getNewContainer } from '../../utils';\nimport { LayerContainer } from './LayerContainer';\nimport { animationDuration } from './StyledLayer';\nimport { ContainerTargetContext } from '../../contexts/ContainerTargetContext';\nimport { LayerPropTypes } from './propTypes';\nvar Layer = /*#__PURE__*/forwardRef(function (props, ref) {\n  var animate = props.animate,\n    animation = props.animation,\n    targetChildPosition = props.targetChildPosition;\n  var _useState = useState(),\n    originalFocusedElement = _useState[0],\n    setOriginalFocusedElement = _useState[1];\n  useEffect(function () {\n    return setOriginalFocusedElement(document.activeElement);\n  }, []);\n  var _useState2 = useState(),\n    layerContainer = _useState2[0],\n    setLayerContainer = _useState2[1];\n  var containerTarget = useContext(ContainerTargetContext);\n  useEffect(function () {\n    return setLayerContainer(getNewContainer(containerTarget, targetChildPosition));\n  }, [containerTarget, targetChildPosition]);\n\n  // just a few things to clean up when the Layer is unmounted\n  useLayoutEffect(function () {\n    return function () {\n      if (originalFocusedElement) {\n        if (originalFocusedElement.focus) {\n          // wait for the fixed positioning to come back to normal\n          // see layer styling for reference\n          setTimeout(function () {\n            return originalFocusedElement.focus();\n          }, 0);\n        } else if (originalFocusedElement.parentNode && originalFocusedElement.parentNode.focus) {\n          // required for IE11 and Edge\n          originalFocusedElement.parentNode.focus();\n        }\n      }\n      if (layerContainer) {\n        var activeAnimation = animation !== undefined ? animation : animate;\n        if (activeAnimation !== false) {\n          // undefined uses 'slide' as the default\n          // animate out and remove later\n          var layerClone = layerContainer.cloneNode(true);\n          layerClone.id = 'layerClone';\n          containerTarget.appendChild(layerClone);\n          var clonedContainer = layerClone.querySelector('[class*=\"StyledLayer__StyledContainer\"]');\n          if (clonedContainer && clonedContainer.style) {\n            clonedContainer.style.animationDirection = 'reverse';\n          }\n          setTimeout(function () {\n            // we add the id and query here so the unit tests work\n            var clone = containerTarget.getRootNode().getElementById('layerClone');\n            if (clone) {\n              if (containerTarget.contains(clone)) {\n                containerTarget.removeChild(clone);\n              }\n              layerContainer.remove();\n            }\n          }, animationDuration);\n        } else if (containerTarget.contains(layerContainer)) {\n          containerTarget.removeChild(layerContainer);\n        }\n      }\n    };\n  }, [animate, animation, containerTarget, layerContainer, originalFocusedElement]);\n  return layerContainer ? /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(LayerContainer, _extends({\n    ref: ref\n  }, props)), layerContainer) : null;\n});\nLayer.displayName = 'Layer';\nLayer.propTypes = LayerPropTypes;\nexport { Layer };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}